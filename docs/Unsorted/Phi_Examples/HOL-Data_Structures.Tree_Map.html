<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory HOL-Data_Structures.Tree_Map</title>
</head>


<body>
<div class="head">
<h1>Theory HOL-Data_Structures.Tree_Map</h1>
</div>

<pre class="source"><span class="comment1"><span>(* Author: Tobias Nipkow *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Unbalanced Tree Implementation of Map›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="HOL-Data_Structures.Tree_Map.html"><span>Tree_Map</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
  </span><a href="HOL-Data_Structures.Tree_Set.html"><span>Tree_Set</span></a><span>
  </span><a href="HOL-Data_Structures.Map_Specs.html"><span>Map_Specs</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Tree_Map.lookup.elims|fact"><span class="entity_def" id="Tree_Map.lookup.induct|fact"><span class="entity_def" id="Tree_Map.lookup.simps|fact"><span class="entity_def" id="Tree_Map.lookup.pelims|fact"><span class="entity_def" id="Tree_Map.lookup.cases|fact"><span class="entity_def" id="Tree_Map.lookup.termination|fact"><span class="entity_def" id="Tree_Map.lookup.pinduct|fact"><span class="entity_def" id="Tree_Map.lookup.psimps|fact"><span class="entity_def" id="Tree_Map.lookup_rel.inducts|fact"><span class="entity_def" id="Tree_Map.lookup_rel.simps|fact"><span class="entity_def" id="Tree_Map.lookup_rel.induct|fact"><span class="entity_def" id="Tree_Map.lookup_rel.cases|fact"><span class="entity_def" id="Tree_Map.lookup_rel.intros|fact"><span class="entity_def" id="Tree_Map.lookup_graph.inducts|fact"><span class="entity_def" id="Tree_Map.lookup_graph.simps|fact"><span class="entity_def" id="Tree_Map.lookup_graph.induct|fact"><span class="entity_def" id="Tree_Map.lookup_graph.cases|fact"><span class="entity_def" id="Tree_Map.lookup_graph.intros|fact"><span class="entity_def" id="Tree_Map.lookup.elims|thm"><span class="entity_def" id="Tree_Map.lookup.induct|thm"><span class="entity_def" id="Tree_Map.lookup.simps(2)|thm"><span class="entity_def" id="Tree_Map.lookup.simps(1)|thm"><span class="entity_def" id="Tree_Map.lookup.pelims|thm"><span class="entity_def" id="Tree_Map.lookup.cases|thm"><span class="entity_def" id="Tree_Map.lookup.termination|thm"><span class="entity_def" id="Tree_Map.lookup.pinduct|thm"><span class="entity_def" id="Tree_Map.lookup.psimps(2)|thm"><span class="entity_def" id="Tree_Map.lookup.psimps(1)|thm"><span class="entity_def" id="Tree_Map.lookup_rel.inducts|thm"><span class="entity_def" id="Tree_Map.lookup_rel.simps|thm"><span class="entity_def" id="Tree_Map.lookup_rel.induct|thm"><span class="entity_def" id="Tree_Map.lookup_rel.cases|thm"><span class="entity_def" id="Tree_Map.lookup_rel.intros(2)|thm"><span class="entity_def" id="Tree_Map.lookup_rel.intros(1)|thm"><span class="entity_def" id="Tree_Map.lookup_graph.inducts|thm"><span class="entity_def" id="Tree_Map.lookup_graph.simps|thm"><span class="entity_def" id="Tree_Map.lookup_graph.induct|thm"><span class="entity_def" id="Tree_Map.lookup_graph.cases|thm"><span class="entity_def" id="Tree_Map.lookup_graph.intros(2)|thm"><span class="entity_def" id="Tree_Map.lookup_graph.intros(1)|thm"><span class="entity_def" id="Tree_Map.lookup_def|axiom"><span class="entity_def" id="Tree_Map.lookup_rel_def|axiom"><span class="entity_def" id="Tree_Map.lookup_sumC_def|axiom"><span class="entity_def" id="Tree_Map.lookup_graph_def|axiom"><span class="entity_def" id="Tree_Map.lookup_dom|const"><span class="entity_def" id="Tree_Map.lookup_rel|const"><span class="entity_def" id="Tree_Map.lookup_sumC|const"><span class="entity_def" id="Tree_Map.lookup_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Tree_Map.lookup|const"><span>lookup</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>*</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree|type"><span>tree</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lookup</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Leaf|const"><span>Leaf</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lookup</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Cmp.html#Cmp.cmp|const"><span>cmp</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span> LT </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>lookup</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>|</span></span><span> GT </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>lookup</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>|</span></span><span> EQ </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Tree_Map.update.elims|fact"><span class="entity_def" id="Tree_Map.update.induct|fact"><span class="entity_def" id="Tree_Map.update.simps|fact"><span class="entity_def" id="Tree_Map.update.pelims|fact"><span class="entity_def" id="Tree_Map.update.cases|fact"><span class="entity_def" id="Tree_Map.update.termination|fact"><span class="entity_def" id="Tree_Map.update.pinduct|fact"><span class="entity_def" id="Tree_Map.update.psimps|fact"><span class="entity_def" id="Tree_Map.update_rel.inducts|fact"><span class="entity_def" id="Tree_Map.update_rel.simps|fact"><span class="entity_def" id="Tree_Map.update_rel.induct|fact"><span class="entity_def" id="Tree_Map.update_rel.cases|fact"><span class="entity_def" id="Tree_Map.update_rel.intros|fact"><span class="entity_def" id="Tree_Map.update_graph.inducts|fact"><span class="entity_def" id="Tree_Map.update_graph.simps|fact"><span class="entity_def" id="Tree_Map.update_graph.induct|fact"><span class="entity_def" id="Tree_Map.update_graph.cases|fact"><span class="entity_def" id="Tree_Map.update_graph.intros|fact"><span class="entity_def" id="Tree_Map.update.elims|thm"><span class="entity_def" id="Tree_Map.update.induct|thm"><span class="entity_def" id="Tree_Map.update.simps(2)|thm"><span class="entity_def" id="Tree_Map.update.simps(1)|thm"><span class="entity_def" id="Tree_Map.update.pelims|thm"><span class="entity_def" id="Tree_Map.update.cases|thm"><span class="entity_def" id="Tree_Map.update.termination|thm"><span class="entity_def" id="Tree_Map.update.pinduct|thm"><span class="entity_def" id="Tree_Map.update.psimps(2)|thm"><span class="entity_def" id="Tree_Map.update.psimps(1)|thm"><span class="entity_def" id="Tree_Map.update_rel.inducts|thm"><span class="entity_def" id="Tree_Map.update_rel.simps|thm"><span class="entity_def" id="Tree_Map.update_rel.induct|thm"><span class="entity_def" id="Tree_Map.update_rel.cases|thm"><span class="entity_def" id="Tree_Map.update_rel.intros(2)|thm"><span class="entity_def" id="Tree_Map.update_rel.intros(1)|thm"><span class="entity_def" id="Tree_Map.update_graph.inducts|thm"><span class="entity_def" id="Tree_Map.update_graph.simps|thm"><span class="entity_def" id="Tree_Map.update_graph.induct|thm"><span class="entity_def" id="Tree_Map.update_graph.cases|thm"><span class="entity_def" id="Tree_Map.update_graph.intros(2)|thm"><span class="entity_def" id="Tree_Map.update_graph.intros(1)|thm"><span class="entity_def" id="Tree_Map.update_def|axiom"><span class="entity_def" id="Tree_Map.update_rel_def|axiom"><span class="entity_def" id="Tree_Map.update_sumC_def|axiom"><span class="entity_def" id="Tree_Map.update_graph_def|axiom"><span class="entity_def" id="Tree_Map.update_dom|const"><span class="entity_def" id="Tree_Map.update_rel|const"><span class="entity_def" id="Tree_Map.update_sumC|const"><span class="entity_def" id="Tree_Map.update_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Tree_Map.update|const"><span>update</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>*</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree|type"><span>tree</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>*</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree|type"><span>tree</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>update</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Leaf|const"><span>Leaf</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Leaf|const"><span>Leaf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Leaf|const"><span>Leaf</span></a><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>update</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Cmp.html#Cmp.cmp|const"><span>cmp</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span>
   LT </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>update</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>|</span></span><span>
   EQ </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>|</span></span><span>
   GT </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>update</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Tree_Map.delete.elims|fact"><span class="entity_def" id="Tree_Map.delete.induct|fact"><span class="entity_def" id="Tree_Map.delete.simps|fact"><span class="entity_def" id="Tree_Map.delete.pelims|fact"><span class="entity_def" id="Tree_Map.delete.cases|fact"><span class="entity_def" id="Tree_Map.delete.termination|fact"><span class="entity_def" id="Tree_Map.delete.pinduct|fact"><span class="entity_def" id="Tree_Map.delete.psimps|fact"><span class="entity_def" id="Tree_Map.delete_rel.inducts|fact"><span class="entity_def" id="Tree_Map.delete_rel.simps|fact"><span class="entity_def" id="Tree_Map.delete_rel.induct|fact"><span class="entity_def" id="Tree_Map.delete_rel.cases|fact"><span class="entity_def" id="Tree_Map.delete_rel.intros|fact"><span class="entity_def" id="Tree_Map.delete_graph.inducts|fact"><span class="entity_def" id="Tree_Map.delete_graph.simps|fact"><span class="entity_def" id="Tree_Map.delete_graph.induct|fact"><span class="entity_def" id="Tree_Map.delete_graph.cases|fact"><span class="entity_def" id="Tree_Map.delete_graph.intros|fact"><span class="entity_def" id="Tree_Map.delete.elims|thm"><span class="entity_def" id="Tree_Map.delete.induct|thm"><span class="entity_def" id="Tree_Map.delete.simps(2)|thm"><span class="entity_def" id="Tree_Map.delete.simps(1)|thm"><span class="entity_def" id="Tree_Map.delete.pelims|thm"><span class="entity_def" id="Tree_Map.delete.cases|thm"><span class="entity_def" id="Tree_Map.delete.termination|thm"><span class="entity_def" id="Tree_Map.delete.pinduct|thm"><span class="entity_def" id="Tree_Map.delete.psimps(2)|thm"><span class="entity_def" id="Tree_Map.delete.psimps(1)|thm"><span class="entity_def" id="Tree_Map.delete_rel.inducts|thm"><span class="entity_def" id="Tree_Map.delete_rel.simps|thm"><span class="entity_def" id="Tree_Map.delete_rel.induct|thm"><span class="entity_def" id="Tree_Map.delete_rel.cases|thm"><span class="entity_def" id="Tree_Map.delete_rel.intros(2)|thm"><span class="entity_def" id="Tree_Map.delete_rel.intros(1)|thm"><span class="entity_def" id="Tree_Map.delete_graph.inducts|thm"><span class="entity_def" id="Tree_Map.delete_graph.simps|thm"><span class="entity_def" id="Tree_Map.delete_graph.induct|thm"><span class="entity_def" id="Tree_Map.delete_graph.cases|thm"><span class="entity_def" id="Tree_Map.delete_graph.intros(2)|thm"><span class="entity_def" id="Tree_Map.delete_graph.intros(1)|thm"><span class="entity_def" id="Tree_Map.delete_def|axiom"><span class="entity_def" id="Tree_Map.delete_rel_def|axiom"><span class="entity_def" id="Tree_Map.delete_sumC_def|axiom"><span class="entity_def" id="Tree_Map.delete_graph_def|axiom"><span class="entity_def" id="Tree_Map.delete_dom|const"><span class="entity_def" id="Tree_Map.delete_rel|const"><span class="entity_def" id="Tree_Map.delete_sumC|const"><span class="entity_def" id="Tree_Map.delete_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Tree_Map.delete|const"><span>delete</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>*</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree|type"><span>tree</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>*</span></a></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree|type"><span>tree</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>delete</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Leaf|const"><span>Leaf</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Leaf|const"><span>Leaf</span></a><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>delete</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Cmp.html#Cmp.cmp|const"><span>cmp</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span>
  LT </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>delete</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>|</span></span><span>
  GT </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>delete</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span>
  EQ </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Leaf|const"><span>Leaf</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ab'</span></span><span class="main"><span>,</span></span><span class="bound"><span>r'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Tree_Set.html#Tree_Set.split_min|const"><span>split_min</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.tree.Node|const"><span>Node</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>ab'</span></span><span> </span><span class="bound"><span>r'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Functional Correctness Proofs"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Tree_Map.lookup_map_of|fact"><span class="entity_def" id="Tree_Map.lookup_map_of|thm"><span>lookup_map_of</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.sorted1|const"><span>sorted1</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.lookup|const"><span>lookup</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.map_of|const"><span>map_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.map_of_simps|fact"><span>map_of_simps</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.split|fact"><span>option.split</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Tree_Map.inorder_update|fact"><span class="entity_def" id="Tree_Map.inorder_update|thm"><span>inorder_update</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.sorted1|const"><span>sorted1</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.update|const"><span>update</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.upd_list|const"><span>upd_list</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.upd_list_simps|fact"><span>upd_list_simps</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Tree_Map.inorder_delete|fact"><span class="entity_def" id="Tree_Map.inorder_delete|thm"><span>inorder_delete</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.sorted1|const"><span>sorted1</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.delete|const"><span>delete</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.del_list|const"><span>del_list</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a><span> </span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.AList_Upd_Del.html#AList_Upd_Del.del_list_simps|fact"><span>del_list_simps</span></a><span> </span><a class="entity_ref" href="HOL-Data_Structures.Tree_Set.html#Tree_Set.split_minD|fact"><span>split_minD</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.splits|fact"><span>prod.splits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Tree_Map.M.invar_def|fact"><span class="entity_def" id="Tree_Map.M.inorder_inv_delete|fact"><span class="entity_def" id="Tree_Map.M.inorder_inv_update|fact"><span class="entity_def" id="Tree_Map.M.inorder_inv_empty|fact"><span class="entity_def" id="Tree_Map.M.inorder_delete|fact"><span class="entity_def" id="Tree_Map.M.inorder_update|fact"><span class="entity_def" id="Tree_Map.M.inorder_lookup|fact"><span class="entity_def" id="Tree_Map.M.inorder_empty|fact"><span class="entity_def" id="Tree_Map.M.Map_by_Ordered_axioms|fact"><span class="entity_def" id="Tree_Map.M.map_specs|fact"><span class="entity_def" id="Tree_Map.M.invar_delete|fact"><span class="entity_def" id="Tree_Map.M.invar_update|fact"><span class="entity_def" id="Tree_Map.M.invar_empty|fact"><span class="entity_def" id="Tree_Map.M.map_delete|fact"><span class="entity_def" id="Tree_Map.M.map_update|fact"><span class="entity_def" id="Tree_Map.M.map_empty|fact"><span class="entity_def" id="Tree_Map.M.Map_axioms|fact"><span class="entity_def" id="Tree_Map.M.invar_def|thm"><span class="entity_def" id="Tree_Map.M.map_empty|thm"><span class="entity_def" id="Tree_Map.M.map_specs(6)|thm"><span class="entity_def" id="Tree_Map.M.map_specs(5)|thm"><span class="entity_def" id="Tree_Map.M.map_specs(4)|thm"><span class="entity_def" id="Tree_Map.M.map_specs(3)|thm"><span class="entity_def" id="Tree_Map.M.map_specs(2)|thm"><span class="entity_def" id="Tree_Map.M.map_specs(1)|thm"><span class="entity_def" id="Tree_Map.M.map_delete|thm"><span class="entity_def" id="Tree_Map.M.map_update|thm"><span class="entity_def" id="Tree_Map.M.invar_empty|thm"><span class="entity_def" id="Tree_Map.M.invar_delete|thm"><span class="entity_def" id="Tree_Map.M.invar_update|thm"><span class="entity_def" id="Tree_Map.M.inorder_empty|thm"><span class="entity_def" id="Tree_Map.M.inorder_delete|thm"><span class="entity_def" id="Tree_Map.M.inorder_lookup|thm"><span class="entity_def" id="Tree_Map.M.inorder_update|thm"><span class="entity_def" id="Tree_Map.M.inorder_inv_empty|thm"><span class="entity_def" id="Tree_Map.M.inorder_inv_delete|thm"><span class="entity_def" id="Tree_Map.M.inorder_inv_update|thm"><span class="entity_def" id="Tree_Map.M.Map_by_Ordered_axioms|thm"><span class="entity_def" id="Tree_Map.M.Map_axioms|thm"><span class="entity_def" id="Tree_Map.M.invar|const"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> M</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Map_Specs.html#Map_Specs.Map_by_Ordered|locale"><span>Map_by_Ordered</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> empty </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Data_Structures.Tree_Set.html#Tree_Set.empty|const"><span>empty</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> lookup </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.lookup|const"><span>lookup</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> update </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.update|const"><span>update</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> delete </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.delete|const"><span>delete</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> inorder </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Tree.html#Tree.inorder|const"><span>inorder</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> inv </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Tree_Set.html#Tree_Set.empty_def|fact"><span>empty_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>2</span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.lookup_map_of|fact"><span>lookup_map_of</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>3</span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.inorder_update|fact"><span>inorder_update</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>4</span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Data_Structures.Tree_Map.html#Tree_Map.inorder_delete|fact"><span>inorder_delete</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>