<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Phi_Semantics.PhSem_MoV</title>
</head>


<body>
<div class="head">
<h1>Theory Phi_Semantics.PhSem_MoV</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>chapter</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Formalization Tools for Map-of-Val›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Phi_Semantics.PhSem_MoV.html"><span>PhSem_MoV</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../Phi_Semantics/PhSm_Ag_Base.html"><span>PhSm_Ag_Base</span></a><span> </span><a href="../Phi_Semantics/Phi_System.Resource_Template.html"><span>Phi_System.Resource_Template</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>debt_axiomatization</span></span></span><span> </span><span class="free"><span class="entity_def" id="PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map|type"><span>⇀</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span>›</span></span></span><span>
                </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span class="entity_def" id="PhSem_MoV.Dom_of_TY|const"><span>Dom_of_TY</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_inj|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_inj|thm"><span>Map_of_Val_inj</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Vb</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="free"><span>Va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="free"><span>Vb</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Vb</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_dom|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_dom|thm"><span>Map_of_Val_dom</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="free"><span>Va</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Dom_of_TY</span></span><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhSem_MoV.Dom_of_TY_step|fact"><span class="entity_def" id="PhSem_MoV.Dom_of_TY_step|thm"><span>Dom_of_TY_step</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_idx_step|const"><span>valid_idx_step</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Dom_of_TY</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.idx_step_type|const"><span>idx_step_type</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>Dom_of_TY</span></span><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhSem_MoV.Mapof_not_1|fact"><span class="entity_def" id="PhSem_MoV.Mapof_not_1|thm"><span>Mapof_not_1</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>V</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="free"><span>V</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_pull_step|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_pull_step|thm"><span>Map_of_Val_pull_step</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_idx_step|const"><span>valid_idx_step</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>V</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
                          </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>i</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.idx_step_value|const"><span>idx_step_value</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>   </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_mod_step|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_mod_step|thm"><span>Map_of_Val_mod_step</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_idx_step|const"><span>valid_idx_step</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
                         </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.idx_step_mod_value|const"><span>idx_step_mod_value</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_add|const"><span>++</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="main"><span>[</span></span><span class="free"><span>i</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Map_of_Val</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.idx_step_value|const"><span>idx_step_value</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_pull|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_pull|thm"><span>Map_of_Val_pull</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>V</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>V</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_pull_step|fact"><span>Map_of_Val_pull_step</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.welltyp_subject_idx_step|fact"><span>welltyp_subject_idx_step</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map_cons|fact"><span>pull_map_cons</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.Dom_of_TY|fact"><span class="entity_def" id="PhSem_MoV.Dom_of_TY|thm"><span>Dom_of_TY</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY|const"><span>Dom_of_TY</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY|const"><span>Dom_of_TY</span></a><span> </span><span class="free"><span>T</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY_step|fact"><span>Dom_of_TY_step</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.trans|fact"><span>dual_order.trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.map_add_subsumed_dom|fact"><span class="entity_def" id="PhSem_MoV.map_add_subsumed_dom|thm"><span>map_add_subsumed_dom</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_add|const"><span>++</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_add_def|fact"><span>map_add_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_def|fact"><span>dom_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|fact"><span>subset_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.case_eq_if|fact"><span>option.case_eq_if</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.collapse|fact"><span>option.collapse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.simps|fact"><span>option.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_mod|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_mod|thm"><span>Map_of_Val_mod</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>T</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_add|const"><span>++</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>u</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span> </span><span class="quoted"><span class="free"><span>T</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.map_add_subsumed_dom|fact"><span>map_add_subsumed_dom</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_refl|fact"><span>order_refl</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.clarify|method"><span class="operator"><span>clarify</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.welltyp_subject_idx_step|fact"><span>welltyp_subject_idx_step</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_mod_step|fact"><span>Map_of_Val_mod_step</span></a><span>  </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_distrib_map_add|fact"><span>push_map_distrib_map_add</span></a><span>
                        </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_pull_step|fact"><span>Map_of_Val_pull_step</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_pull_map|fact"><span>push_pull_map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_add_subsumed2|fact"><span>map_add_subsumed2</span></a><span>
                        </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_push_map|fact"><span>push_map_push_map</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_def|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_def|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Map_of_Val_ins</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(o)</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                            </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>V</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>V</span></span><span> </span><span class="keyword1"><span>of</span></span><span> Some </span><span class="bound"><span>V'</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="bound"><span>V'</span></span><span> </span><span class="main"><span>|</span></span><span> None </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                            </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.dest|const"><span>discrete.dest</span></a><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_dom_def|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_dom_def|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_dom_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Map_of_Val_ins_dom</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.pred_option|const"><span>pred_option</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.dest|const"><span>discrete.dest</span></a><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_eval|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_eval(2)|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_eval(1)|thm"><span>Map_of_Val_ins_eval</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_def|fact"><span>Map_of_Val_ins_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_None|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_None|thm"><span>Map_of_Val_ins_None</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_def|fact"><span>Map_of_Val_ins_def</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom_def|fact"><span>Map_of_Val_ins_dom_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Mapof_not_1|fact"><span>Mapof_not_1</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.dom_1|fact"><span>dom_1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_eq_empty_conv|fact"><span>dom_eq_empty_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_map_option_comp|fact"><span>dom_map_option_comp</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_dom_NONE|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_dom_NONE|thm"><span>Map_of_Val_ins_dom_NONE</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom_def|fact"><span>Map_of_Val_ins_dom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_dom_eval|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins_dom_eval|thm"><span>Map_of_Val_ins_dom_eval</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom_def|fact"><span>Map_of_Val_ins_dom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.\&lt;F&gt;_functional_condition_Map_of_Val_ins_dom|fact"><span class="entity_def" id="PhSem_MoV.\&lt;F&gt;_functional_condition_Map_of_Val_ins_dom|thm"><span>ℱ_functional_condition_Map_of_Val_ins_dom</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_condition|const"><span>ℱ_functional_condition</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_condition_def|fact"><span>ℱ_functional_condition_def</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom_def|fact"><span>Map_of_Val_ins_dom_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="improper"><span>r</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="improper"><span class="quoted"><span class="improper"><span>x</span></span></span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement&apos;|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement_complex|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.cancl_sep_orthogonal_monoid_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_projection|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.simple_homo_mul|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal_monoid_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.one_in_D|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal_1_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_one|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_one_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal&apos;|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_join_sub|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_join_sub_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_sep_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_disj_homo_semi|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_sep_disj_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_mult|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_sep_mult_axioms|fact"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.one_in_D|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_join_sub|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_mult|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement&apos;|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement_complex|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_projection|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.cancl_sep_orthogonal_monoid_axioms|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.simple_homo_mul|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal_monoid_axioms|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal_1_axioms|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_one|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_one_axioms|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal&apos;|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_orthogonal_axioms|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_join_sub_axioms|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_sep_axioms|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.sep_disj_homo_semi|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_sep_disj_axioms|thm"><span class="entity_def" id="PhSem_MoV.Map_of_Val_ins.homo_sep_mult_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> Map_of_Val_ins</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.cancl_sep_orthogonal_monoid|locale"><span>cancl_sep_orthogonal_monoid</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_def|fact"><span>Map_of_Val_ins_def</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_meta_all|fact"><span>split_discrete_meta_all</span></a><span>
                                      </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom_def|fact"><span>Map_of_Val_ins_dom_def</span></a><span>
                            </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.split|fact"><span>option.split</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.split_option_ex|fact"><span>split_option_ex</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.times_fun|fact"><span>times_fun</span></a><span> 
                                  </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_fun_def|fact"><span>sep_disj_fun_def</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_meta_all|fact"><span>split_discrete_meta_all</span></a><span>
                        </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.split|fact"><span>option.split</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>[</span></span></span><span>1</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Mapof_not_1|fact"><span>Mapof_not_1</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.domIff|fact"><span>domIff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_disc_iff|fact"><span>option.map_disc_iff</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.times_option_none|fact"><span>times_option_none</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_3915..3920">prems</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> a x x' </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3949..3951">t1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.domIff|fact"><span>domIff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.map_option_is_None|fact"><span>map_option_is_None</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.mult_1|fact"><span>mult_1</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.one_option_def|fact"><span>one_option_def</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_3915..3920"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_3915..3920"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_3915..3920"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_3915..3920"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4094..4096">t2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="skolem"><span>x'</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_3915..3920"><span>prems</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_3949..3951"><span>t1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_inj|fact"><span>Map_of_Val_inj</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Basic_BNFs.html#Basic_BNFs.fun.inj_map_strong|fact"><span>fun.inj_map_strong</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.inject|fact"><span>discrete.inject</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.Option.option.inj_map_strong|fact"><span>option.inj_map_strong</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_3915..3920"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_3915..3920"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4094..4096"><span>t2</span></a><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.map_tree_refinement_modify|fact"><span class="entity_def" id="PhSem_MoV.map_tree_refinement_modify|thm"><span>map_tree_refinement_modify</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>D</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_add|const"><span>++</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="free"><span>S</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>push_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete|type"><span>discrete</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation_def|fact"><span>Fictional_Forward_Simulation_def</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.the_subtree_def|fact"><span>the_subtree_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_4862..4867">prems</span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> r R a' u x
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4902..4904">t1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span>(</span></span><span>12</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_partial_map_disjoint|fact"><span>sep_disj_partial_map_disjoint</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5024..5026">t2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_commute|fact"><span>Int_commute</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_dom_eq|fact"><span>push_map_dom_eq</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_partial_map_disjoint|fact"><span>sep_disj_partial_map_disjoint</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5161..5163">t3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="skolem"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf_commute|fact"><span>inf_commute</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_dom_eq|fact"><span>push_map_dom_eq</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_partial_map_disjoint|fact"><span>sep_disj_partial_map_disjoint</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5298..5300">t4</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>u</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_partial_map_disjoint|fact"><span>sep_disj_partial_map_disjoint</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_5161..5163"><span>t3</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5382..5384">t5</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>r</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_partial_map_disjoint|fact"><span>sep_disj_partial_map_disjoint</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_5024..5026"><span>t2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>t6</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="skolem"><span>a'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>11</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_partial_map_disjoint|fact"><span>sep_disj_partial_map_disjoint</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_5382..5384"><span>t5</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>u</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_5298..5300"><span>t4</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.refl|fact"><span>dual_order.refl</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.map_add_subsumed_dom|fact"><span>map_add_subsumed_dom</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>6</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4862..4867"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>7</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_distrib_map_add|fact"><span>push_map_distrib_map_add</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.comm_sep_disj_class.sep_disj_commute|fact"><span>sep_disj_commute</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_4902..4904"><span>t1</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_5024..5026"><span>t2</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_5161..5163"><span>t3</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_5382..5384"><span>t5</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.times_fun_map_add_right|fact"><span>times_fun_map_add_right</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_comp_id_simp|fact"><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_comp_id_simp|thm"><span>fiction_Map_of_Val_ins_comp_id_simp</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Types.html#Phi_Types.\&lt;phi&gt;Composition|const"><span>⨾</span></a></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_comp|fact"><span>ℱ_functional_comp</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.val_map_eq_index_value_eq|fact"><span class="entity_def" id="PhSem_MoV.val_map_eq_index_value_eq|thm"><span>val_map_eq_index_value_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_6460..6465">prems</span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6483..6485">t1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY|const"><span>Dom_of_TY</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_pull|fact"><span>Map_of_Val_pull</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value_welltyp|fact"><span>index_value_welltyp</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6653..6655">t2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
              </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.dom1_dom|fact"><span>dom1_dom</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.dom1_mult|fact"><span>dom1_mult</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_map_option_comp|fact"><span>dom_map_option_comp</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.homo_one_map_option|fact"><span>homo_one_map_option</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map_funcomp|fact"><span>pull_map_funcomp</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map_homo_mult|fact"><span>pull_map_homo_mult</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map_sep_disj|fact"><span>pull_map_sep_disj</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_push_map|fact"><span>pull_push_map</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_ab_semigroup_class.sep_mult_commute|fact"><span>sep_mult_commute</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6943..6945">t3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.dom1_dom|fact"><span>dom1_dom</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_map_option_comp|fact"><span>dom_map_option_comp</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map_sep_disj|fact"><span>pull_map_sep_disj</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_push_map|fact"><span>pull_push_map</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_dom1_disj_disjoint|fact"><span>sep_disj_dom1_disj_disjoint</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7124..7126">t4</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY|const"><span>Dom_of_TY</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>t5</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6483..6485"><span>t1</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6653..6655"><span>t2</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6943..6945"><span>t3</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_7124..7126"><span>t4</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map_homo_mult|fact"><span>pull_map_homo_mult</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map|const"><span>pull_map</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Basic_BNFs.html#Basic_BNFs.fun.inj_map_strong|fact"><span>fun.inj_map_strong</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.homo_one_map_option|fact"><span>homo_one_map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.inject|fact"><span>discrete.inject</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.Option.option.inj_map_strong|fact"><span>option.inj_map_strong</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.pull_map_funcomp|fact"><span>pull_map_funcomp</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_inj|fact"><span>Map_of_Val_inj</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_pull|fact"><span>Map_of_Val_pull</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value_welltyp|fact"><span>index_value_welltyp</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_6460..6465"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.val_map_mod_index_value|fact"><span class="entity_def" id="PhSem_MoV.val_map_mod_index_value|thm"><span>val_map_mod_index_value</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_mod|fact"><span>Map_of_Val_mod</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.map_option_funcomp_map_add|fact"><span>map_option_funcomp_map_add</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY|fact"><span>Dom_of_TY</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.homo_one_map_option|fact"><span>homo_one_map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type_idem|fact"><span>index_type_idem</span></a><span>
          </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.map_add_subsumed_dom|fact"><span>map_add_subsumed_dom</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.map_option_funcomp_map_add|fact"><span>map_option_funcomp_map_add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_distrib_map_add|fact"><span>push_map_distrib_map_add</span></a><span>
          </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_homo|fact"><span>push_map_homo</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.comm_sep_disj_class.sep_disj_commute|fact"><span>sep_disj_commute</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_disj_partial_map_disjoint|fact"><span>sep_disj_partial_map_disjoint</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.times_fun_map_add_right|fact"><span>times_fun_map_add_right</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index.simps|fact"><span>valid_index.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.val_map_mod_index_value_projection|fact"><span class="entity_def" id="PhSem_MoV.val_map_mod_index_value_projection|thm"><span>val_map_mod_index_value_projection</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projection_def|fact"><span>refinement_projection_def</span></a><span>
                            </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom_def|fact"><span>Map_of_Val_ins_dom_def</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_def|fact"><span>Map_of_Val_ins_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span>
         </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="improper"><span>xb</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_meta_all|fact"><span>split_discrete_meta_all</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Mapof_not_1|fact"><span>Mapof_not_1</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.dom_1|fact"><span>dom_1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_eq_empty_conv|fact"><span>dom_eq_empty_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_map_option_comp|fact"><span>dom_map_option_comp</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.mult_1_class.mult_1_right|fact"><span>mult_1_class.mult_1_right</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.comm_sep_disj_class.sep_disj_commuteI|fact"><span>sep_disj_commuteI</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_magma_1_class.sep_magma_1_left|fact"><span>sep_magma_1_left</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.val_map_eq_index_value_eq|fact"><span>val_map_eq_index_value_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_projection|fact"><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_projection|thm"><span>fiction_Map_of_Val_ins_projection</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                          </span><span class="main"><span>{</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_comp_id_simp|fact"><span>fiction_Map_of_Val_ins_comp_id_simp</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projections_stepwise_UNIV_paired|fact"><span>refinement_projections_stepwise_UNIV_paired</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_projection|fact"><span>Map_of_Val_ins.ℱ_functional_projection</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.val_map_mod_index_value_projection|fact"><span>val_map_mod_index_value_projection</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_projection&apos;|fact"><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_projection&apos;|thm"><span>fiction_Map_of_Val_ins_projection'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                          </span><span class="main"><span>{</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_projection|fact"><span>fiction_Map_of_Val_ins_projection</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_refinement|fact"><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_refinement|thm"><span>fiction_Map_of_Val_ins_refinement</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.map_discrete|const"><span>map_discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
            </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_comp_id_simp|fact"><span>fiction_Map_of_Val_ins_comp_id_simp</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.sep_refinement_stepwise|fact"><span>sep_refinement_stepwise</span></a><span class="main"><span class="main"><span>[</span></span></span><span>
            </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_frame|fact"><span>refinement_frame</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> R </span><span class="main"><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement_complex|fact"><span>Map_of_Val_ins.ℱ_functional_refinement_complex</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_ex|fact"><span>split_discrete_ex</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_image_mem_iff|fact"><span>inj_image_mem_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.split_option_all|fact"><span>split_option_all</span></a><span>
                   </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_all|fact"><span>split_discrete_all</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value_welltyp|fact"><span>index_mod_value_welltyp</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.frame_preserving_relation_def|fact"><span>frame_preserving_relation_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.split_option_all|fact"><span>split_option_all</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_all|fact"><span>split_discrete_all</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Sep_Closed_def|fact"><span>Sep_Closed_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_11510..11515">prems</span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11533..11535">t1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>B</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="skolem"><span>B</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.pairself|const"><span>pairself</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span>
            </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.map_discrete|const"><span>map_discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span>
             </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_add|const"><span>++</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY|const"><span>Dom_of_TY</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet_image|fact"><span>ExSet_image</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.Subjection_image|fact"><span>Subjection_image</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span>
             </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈</span></span><span class="main"><span>_</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_ex|fact"><span>split_discrete_ex</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_image_mem_iff|fact"><span>inj_image_mem_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_mod|fact"><span>Map_of_Val_mod</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.map_option_funcomp_map_add|fact"><span>map_option_funcomp_map_add</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.homo_one_map_option|fact"><span>homo_one_map_option</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_homo|fact"><span>push_map_homo</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12306..12308">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_12324..12326">t2</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_12306..12308"><span>this</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11533..11535"><span>t1</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_sub_fun|fact"><span>refinement_sub_fun</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12377..12379">t3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY|const"><span>Dom_of_TY</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12488..12490">t4</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_None|fact"><span>Map_of_Val_ins_None</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom_eval|fact"><span>Map_of_Val_ins_dom_eval</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_eval|fact"><span>Map_of_Val_ins_eval</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.distinct|fact"><span>option.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map_eq_1|fact"><span>push_map_eq_1</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12687..12689">t5</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.dom1_disjoint_sep_disj|fact"><span>dom1_disjoint_sep_disj</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.dom1_dom|fact"><span>dom1_dom</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_eq_empty_conv|fact"><span>dom_eq_empty_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty_subsetI|fact"><span>empty_subsetI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.inf.orderE|fact"><span>inf.orderE</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.one_partial_map|fact"><span>one_partial_map</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_no_inverse_class.sep_no_inverse|fact"><span>sep_no_inverse</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.times_fun_def|fact"><span>times_fun_def</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.times_option_none|fact"><span>times_option_none</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_12324..12326"><span>t2</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.map_tree_refinement_modify|fact"><span>map_tree_refinement_modify</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Dom_of_TY|fact"><span>Dom_of_TY</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_dom|fact"><span>Map_of_Val_dom</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_12377..12379"><span>t3</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_def|fact"><span>Map_of_Val_ins_def</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom_def|fact"><span>Map_of_Val_ins_dom_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.split_option_ex|fact"><span>split_option_ex</span></a><span>
                       </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_ex|fact"><span>split_discrete_ex</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_meta_all|fact"><span>split_discrete_meta_all</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_all|fact"><span>split_discrete_all</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_12687..12689"><span>t5</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value_welltyp|fact"><span>index_mod_value_welltyp</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_11510..11515"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.comm_sep_disj_class.sep_disj_commuteI|fact"><span>sep_disj_commuteI</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_ab_semigroup_class.sep_mult_commute|fact"><span>sep_mult_commute</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.sep_no_inverse_class.sep_no_inverse|fact"><span>sep_no_inverse</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_12488..12490"><span>t4</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.val_map_mod_index_value|fact"><span>val_map_mod_index_value</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_13466..13471">prems</span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13490..13492">t1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Domain|const"><span>Domain</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="skolem"><span>a</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>u</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>P</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Domain_unfold|fact"><span>Domain_unfold</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13627..13629">t2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>u</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span>
                </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_13490..13492"><span>t1</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_13627..13629"><span>t2</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.val_map_mod_index_value_projection|fact"><span>val_map_mod_index_value_projection</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_13466..13471"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_13466..13471"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.mul_carrier_option_def|fact"><span>mul_carrier_option_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.Option.option.pred_True|fact"><span>option.pred_True</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_perm_partial_refinement|fact"><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_perm_partial_refinement|thm"><span>fiction_Map_of_Val_perm_partial_refinement</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.map_discrete|const"><span>map_discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
            </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_comp|fact"><span>ℱ_functional_comp</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> Df</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.sep_refinement_stepwise|fact"><span>sep_refinement_stepwise</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_frame|fact"><span>refinement_frame</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_refinement|fact"><span>fiction_Map_of_Val_ins_refinement</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_refinement|fact"><span>pointwise_to_share.ℱ_functional_refinement</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> a</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span>
              </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.pointwise_set_UNIV|fact"><span>pointwise_set_UNIV</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_projection|fact"><span>pointwise_to_share.ℱ_functional_projection</span></a><span class="main"><span class="main"><span>[</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> S</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.pointwise_set_UNIV|fact"><span>pointwise_set_UNIV</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_perm_projection|fact"><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_perm_projection|thm"><span>fiction_Map_of_Val_ins_perm_projection</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                          </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_comp|fact"><span>ℱ_functional_comp</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> Df</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projections_stepwise_UNIV_paired|fact"><span>refinement_projections_stepwise_UNIV_paired</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_projection&apos;|fact"><span>fiction_Map_of_Val_ins_projection'</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_projection|fact"><span>pointwise_to_share.ℱ_functional_projection</span></a><span class="main"><span class="main"><span>[</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> S</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.pointwise_set_UNIV|fact"><span>pointwise_set_UNIV</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_perm_projection_half|fact"><span class="entity_def" id="PhSem_MoV.fiction_Map_of_Val_ins_perm_projection_half|thm"><span>fiction_Map_of_Val_ins_perm_projection_half</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>n</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projection|const"><span>refinement_projection</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                          </span><span class="main"><span>{</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.raw_share_class.share|const"><span>⦼</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_comp|fact"><span>ℱ_functional_comp</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> Df</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projections_stepwise_UNIV_paired|fact"><span>refinement_projections_stepwise_UNIV_paired</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_projection&apos;|fact"><span>fiction_Map_of_Val_ins_projection'</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.refinement_projection_half_perm|fact"><span>pointwise_to_share.refinement_projection_half_perm</span></a><span class="main"><span class="main"><span>[</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> S</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.pointwise_set_UNIV|fact"><span>pointwise_set_UNIV</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.split_discrete_ExBI|fact"><span class="entity_def" id="PhSem_MoV.split_discrete_ExBI|thm"><span>split_discrete_ExBI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.ExBI|const"><span>∃*</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.ExBI|const"><span>.</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.ExBI|const"><span>∃*</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.ExBI|const"><span>.</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.BI_eq_iff|fact"><span>BI_eq_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_ex|fact"><span>split_discrete_ex</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.defined_set_in_image|fact"><span class="entity_def" id="PhSem_MoV.defined_set_in_image|thm"><span>defined_set_in_image</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>{</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>u'</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>u'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>u'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>u</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>}</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.MoV.intro|fact"><span class="entity_def" id="PhSem_MoV.MoV_def|fact"><span class="entity_def" id="PhSem_MoV.MoV.intro|thm"><span class="entity_def" id="PhSem_MoV.MoV_def|thm"><span class="entity_def" id="PhSem_MoV.MoV_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV|locale"><span class="entity_def" id="PhSem_MoV.MoV|const"><span>MoV</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span>   </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'Rep</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_inj|fact"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_inj|thm"><span class="entity_def" id="offset_17362..17376">Rep_of_Val_inj</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Vb</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>T</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="free"><span>Va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="free"><span>Vb</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Va</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Vb</span></span><span>›</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.MoV.Val_of_Rep_def|fact"><span class="entity_def" id="PhSem_MoV.MoV.Val_of_Rep_def|thm"><span class="entity_def" id="PhSem_MoV.MoV.Val_of_Rep_def_raw|axiom"><span class="entity_def" id="offset_17465..17475">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhSem_MoV.MoV.Val_of_Rep.cong|fact"><span class="entity_def" id="PhSem_MoV.MoV.Val_of_Rep.cong|thm"><span class="entity_def" id="PhSem_MoV.MoV.Val_of_Rep|const"><span class="entity_def" id="offset_17476..17486">Val_of_Rep</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'Rep</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Val_of_Rep</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rep</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>@</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>rep</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.MoV.map_Rep_def|fact"><span class="entity_def" id="PhSem_MoV.MoV.map_Rep_def|thm"><span class="entity_def" id="PhSem_MoV.MoV.map_Rep_def_raw|axiom"><span class="entity_def" id="offset_17583..17593">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhSem_MoV.MoV.map_Rep.cong|fact"><span class="entity_def" id="PhSem_MoV.MoV.map_Rep.cong|thm"><span class="entity_def" id="PhSem_MoV.MoV.map_Rep|const"><span class="entity_def" id="offset_17594..17601">map_Rep</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'Rep</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'Rep</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>map_Rep</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17476..17486"><span>Val_of_Rep</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.Val_of_Rep_inj|fact"><span class="entity_def" id="PhSem_MoV.MoV.Val_of_Rep_inj|thm"><span class="entity_def" id="offset_17705..17719">Val_of_Rep_inj</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17476..17486"><span>Val_of_Rep</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17465..17475"><span>Val_of_Rep_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17362..17376"><span>Rep_of_Val_inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_TY|const"><span class="entity_def" id="offset_17857..17866">Rep_of_TY</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Rep_of_TY</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.split_Byte_Rep_ExSet|fact"><span class="entity_def" id="PhSem_MoV.MoV.split_Byte_Rep_ExSet|thm"><span>split_Byte_Rep_ExSet</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17857..17866"><span>Rep_of_TY</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>𝗌𝗎𝖻𝗃</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>𝗌𝗎𝖻𝗃</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.BI_eq_iff|fact"><span>BI_eq_iff</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_ex|fact"><span>split_discrete_ex</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_def|fact"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_def|thm"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_def_raw|axiom"><span class="entity_def" id="offset_18129..18139">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins.cong|fact"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins.cong|thm"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins|const"><span class="entity_def" id="offset_18140..18154">Rep_of_Val_ins</span></span></span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Rep_of_Val_ins</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.map_discrete|const"><span>map_discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17476..17486"><span>Val_of_Rep</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom_def|fact"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom_def|thm"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom_def_raw|axiom"><span class="entity_def" id="offset_18228..18238">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom.cong|fact"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom.cong|thm"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom|const"><span class="entity_def" id="offset_18239..18257">Rep_of_Val_ins_dom</span></span></span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Rep_of_Val_ins_dom</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.pred_option|const"><span>pred_option</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.dest|const"><span>discrete.dest</span></a><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17857..17866"><span>Rep_of_TY</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>TY</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_eval|fact"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_eval(2)|thm"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_eval(1)|thm"><span>Rep_of_Val_ins_eval</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17476..17486"><span>Val_of_Rep</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18129..18139"><span>Rep_of_Val_ins_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom_eval|fact"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom_eval(2)|thm"><span class="entity_def" id="PhSem_MoV.MoV.Rep_of_Val_ins_dom_eval(1)|thm"><span class="entity_def" id="offset_18545..18568">Rep_of_Val_ins_dom_eval</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18239..18257"><span>Rep_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span> ›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18239..18257"><span>Rep_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17857..17866"><span>Rep_of_TY</span></a><span> </span><span class="free"><span>TY</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18228..18238"><span>Rep_of_Val_ins_dom_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.\&lt;F&gt;_functional_condition_Rep_of_Val_ins_dom|fact"><span class="entity_def" id="PhSem_MoV.MoV.\&lt;F&gt;_functional_condition_Rep_of_Val_ins_dom|thm"><span class="entity_def" id="offset_18727..18768">ℱ_functional_condition_Rep_of_Val_ins_dom</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_condition|const"><span>ℱ_functional_condition</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18239..18257"><span>Rep_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_condition_def|fact"><span>ℱ_functional_condition_def</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18228..18238"><span>Rep_of_Val_ins_dom_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="improper"><span>r</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="improper"><span class="quoted"><span class="improper"><span>x</span></span></span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="improper"><span class="quoted"><span class="improper"><span class="quoted"><span class="improper"><span class="quoted"><span class="improper"><span>y</span></span></span></span></span></span></span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_18941..18950">sublocale</span></span></span><span> Rep_of_Val_ins</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.cancl_sep_orthogonal_monoid|locale"><span>cancl_sep_orthogonal_monoid</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="free"><span>TY</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18239..18257"><span>Rep_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18129..18139"><span>Rep_of_Val_ins_def</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18228..18238"><span>Rep_of_Val_ins_dom_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.cancl_sep_orthogonal_monoid__map_option_discrete|fact"><span>cancl_sep_orthogonal_monoid__map_option_discrete</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_def|fact"><span>inj_on_def</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_all|fact"><span>split_discrete_all</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.split_option_all|fact"><span>split_option_all</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.mul_carrier_option_def|fact"><span>mul_carrier_option_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.Option.option.pred_True|fact"><span>option.pred_True</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.fiction_Map_of_Val_perm_partial_refinement_BYTE|fact"><span class="entity_def" id="PhSem_MoV.MoV.fiction_Map_of_Val_perm_partial_refinement_BYTE|thm"><span class="entity_def" id="offset_19318..19365">fiction_Map_of_Val_perm_partial_refinement_BYTE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>u</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.map_discrete|const"><span>map_discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17594..17601"><span>map_Rep</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>u</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id_on|const"><span>Id_on</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗋𝖾𝖿𝗂𝗇𝖾𝗌</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
            </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗐.𝗋.𝗍</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18239..18257"><span>Rep_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Types.html#Phi_Types.\&lt;phi&gt;Composition|const"><span>⨾</span></a></span><span>
          </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Fictional_Forward_Simulation|const"><span>𝗂𝗇</span></a></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_20183..20188">prems</span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20207..20212">simp1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span>
        </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17857..17866"><span>Rep_of_TY</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18129..18139"><span>Rep_of_Val_ins_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20534..20539">simp2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>u</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span>
        </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18129..18139"><span>Rep_of_Val_ins_def</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.BI_eq_iff|fact"><span>BI_eq_iff</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>t1</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Domain|const"><span>Domain</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>P</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>simp3</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
         </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span>
       </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17476..17486"><span>Val_of_Rep</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17594..17601"><span>map_Rep</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
         </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span> ›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value_welltyp|fact"><span>index_mod_value_welltyp</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17583..17593"><span>map_Rep_def</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_20183..20188"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_20183..20188"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_20183..20188"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      

    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>cong</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet_cong|fact"><span>SubjectionSet_cong</span></a><span>

    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet_image|fact"><span>ExSet_image</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet_image|fact"><span>SubjectionSet_image</span></a><span>

    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_21351..21354">t11</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_frame|fact"><span>refinement_frame</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> R </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18941..18950"><span>Rep_of_Val_ins.ℱ_functional_refinement_complex</span></a><span class="main"><span>,</span></span><span>
        </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> R4</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>∃<span class="hidden">⇧</span><sup>s</sup></span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.ExSet|const"><span>.</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17594..17601"><span>map_Rep</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>
                  </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.SubjectionSet|const"><span>𝗌𝗎𝖻𝗃𝗌</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span>›</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> TY4 </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="free"><span>TY</span></span></span><span class="main"><span>,</span></span><span>
       </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_20183..20188"><span>prems</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
          </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.sep_refinement_stepwise|fact"><span>sep_refinement_stepwise</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>prefer</span></span></span></span></span><span> 2
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_perm_partial_refinement|fact"><span>fiction_Map_of_Val_perm_partial_refinement</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_20207..20212"><span>simp1</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_20534..20539"><span>simp2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_21351..21354"><span>t11</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value_welltyp|fact"><span>index_mod_value_welltyp</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17583..17593"><span>map_Rep_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.frame_preserving_relation_def|fact"><span>frame_preserving_relation_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.Sep_Closed_def|fact"><span>Sep_Closed_def</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_comp|fact"><span>ℱ_functional_comp</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_trans|fact"><span>subset_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_perm_projection|fact"><span>fiction_Map_of_Val_ins_perm_projection</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.fiction_Map_of_Val_ins_perm_projection_BYTE|fact"><span class="entity_def" id="PhSem_MoV.MoV.fiction_Map_of_Val_ins_perm_projection_BYTE|thm"><span class="entity_def" id="offset_22352..22395">fiction_Map_of_Val_ins_perm_projection_BYTE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projection|const"><span>refinement_projection</span></a><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18239..18257"><span>Rep_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Types.html#Phi_Types.\&lt;phi&gt;Composition|const"><span>⨾</span></a></span><span>
       </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span> ›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_22811..22816">prems</span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22832..22834">t1</span><span class="main"><span>:</span></span><span>
       </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="skolem"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="skolem"><span>TY</span></span><span class="main"><span>}</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="skolem"><span>TY</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>TY</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projections_stepwise_UNIV_paired|fact"><span>refinement_projections_stepwise_UNIV_paired</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>prefer</span></span></span></span></span><span> 2
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_perm_projection|fact"><span>fiction_Map_of_Val_ins_perm_projection</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_22811..22816"><span>prems</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18941..18950"><span>Rep_of_Val_ins.ℱ_functional_projection</span></a><span class="main"><span class="main"><span>[</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> S</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> TY</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="free"><span>TY</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span>
          </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_22832..22834"><span>t1</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV.fiction_Map_of_Val_ins_perm_projection_half_BYTE|fact"><span class="entity_def" id="PhSem_MoV.MoV.fiction_Map_of_Val_ins_perm_projection_half_BYTE|thm"><span class="entity_def" id="offset_23500..23548">fiction_Map_of_Val_ins_perm_projection_half_BYTE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>n</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projection|const"><span>refinement_projection</span></a><span>
     </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18239..18257"><span>Rep_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Types.html#Phi_Types.\&lt;phi&gt;Composition|const"><span>⨾</span></a></span><span>
      </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>{</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.raw_share_class.share|const"><span>⦼</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span>
   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_23975..23980">prems</span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_23999..24001">t1</span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
     </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18129..18139"><span>Rep_of_Val_ins_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span class="main"><span>)</span></span><span>

 </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_23975..23980"><span>prems</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projections_stepwise_UNIV_paired|fact"><span>refinement_projections_stepwise_UNIV_paired</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18941..18950"><span>Rep_of_Val_ins.ℱ_functional_projection</span></a><span>
        </span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> S</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> TY</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="free"><span>TY</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span>
          </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_23999..24001"><span>t1</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18228..18238"><span>Rep_of_Val_ins_dom_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>[</span></span></span><span>1</span><span class="main"><span class="keyword3"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.fiction_Map_of_Val_ins_perm_projection_half|fact"><span>fiction_Map_of_Val_ins_perm_projection_half</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>



</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.MoV_res.axioms|fact"><span class="entity_def" id="PhSem_MoV.MoV_res.intro|fact"><span class="entity_def" id="PhSem_MoV.MoV_res_def|fact"><span class="entity_def" id="PhSem_MoV.MoV_res.axioms(2)|thm"><span class="entity_def" id="PhSem_MoV.MoV_res.axioms(1)|thm"><span class="entity_def" id="PhSem_MoV.MoV_res.intro|thm"><span class="entity_def" id="PhSem_MoV.MoV_res_def|thm"><span class="entity_def" id="PhSem_MoV.MoV_res_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.MoV_res|locale"><span class="entity_def" id="PhSem_MoV.MoV_res|const"><span>MoV_res</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.MoV|locale"><span>MoV</span></a><span> </span><span class="quoted"><span class="free"><span>Rep_of_Val</span></span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.partial_map_resource|locale"><span>partial_map_resource</span></a><span> </span><span class="quoted"><span class="free"><span>Res</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>blk</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="bound"><span>blk</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>Res</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'blk</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'Rep</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete|type"><span>discrete</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.resource_entry|type"><span>resource_entry</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'Rep</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'blk</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.axioms|fact"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.intro|fact"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction_def|fact"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.axioms(2)|thm"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.axioms(1)|thm"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.intro|thm"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction_def|thm"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction_def|axiom"><span class="entity_def" id="offset_24985..24991">locale</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction|locale"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction|const"><span>perm_MoV_fiction</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.MoV|locale"><span>MoV</span></a><span> </span><span class="quoted"><span class="free"><span>Rep_of_Val</span></span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_base_fiction_for_partial_mapping_resource|locale"><span>pointwise_base_fiction_for_partial_mapping_resource</span></a><span>
      </span><span class="quoted"><span class="free"><span>Res</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>blk</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="bound"><span>blk</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18239..18257"><span>Rep_of_Val_ins_dom</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="bound"><span>blk</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_Types.html#Phi_Types.\&lt;phi&gt;Composition|const"><span>⨾</span></a></span><span>
                 </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional|const"><span>ℱ_functional</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins_dom|const"><span>Map_of_Val_ins_dom</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="bound"><span>blk</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
      </span><span class="quoted"><span class="free"><span>Fic</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>blk</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="bound"><span>blk</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>Res</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'blk</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'Rep</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete|type"><span>discrete</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.resource_entry|type"><span>resource_entry</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'Rep</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'blk</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.TY|type"><span>TY</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>null_blk</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'blk</span></span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>Fic</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'blk</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_System/Phi_Element_Path.html#Phi_Element_Path.aggregate_path|type"><span>aggregate_path</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.VAL|type"><span>VAL</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete|type"><span>discrete</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.share|type"><span>share</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.fiction_entry|type"><span>fiction_entry</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.MoV_res|locale"><span>MoV_res</span></a><span> </span><span class="quoted"><span class="free"><span>Res</span></span></span><span> </span><span class="quoted"><span class="free"><span>Rep_of_Val</span></span></span><span> </span><span class="quoted"><span class="free"><span>typ_of_blk</span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.getter_rule|fact"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.getter_rule|thm"><span>getter_rule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>idx</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>cblk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blk</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>n</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>𝗉𝗋𝗈𝖼</span></a></span><span> </span><span>R.φR_get_res_entry'</span><span> </span><span class="free"><span>cblk</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦃</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>(</span></span><span class="free"><span>blk</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.raw_share_class.share|const"><span>⦼</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span>φ</span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.Itself|const"><span>Itself</span></a><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⟼</span></a></span><span>
      </span><span class="main"><span>λ</span></span><span class="bound"><span>ret</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>(</span></span><span class="free"><span>blk</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.raw_share_class.share|const"><span>⦼</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span>φ</span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.Itself|const"><span>Itself</span></a><span>
          </span><span class="keyword1"><span>𝗌𝗎𝖻𝗃</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ret</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.\&lt;phi&gt;arg|const"><span>φarg</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦄</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise_def|fact"><span>Premise_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_26173..26178">prems</span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>cblk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blk</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_26173..26178"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_26252..26257">simp1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹
      </span><span class="main"><span>(</span></span><span class="skolem"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>𝗌𝗎𝖻𝗃</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17857..17866"><span>Rep_of_TY</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>cblk</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>𝗌𝗎𝖻𝗃</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="skolem"><span>ret</span></span><span> </span><span class="skolem"><span>TY</span></span><span> </span><span class="skolem"><span>S</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.BI_eq_iff|fact"><span>BI_eq_iff</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_ex|fact"><span>split_discrete_ex</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span class="quoted"><span>"</span><span>_getter_rule_2_</span><span>"</span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_23500..23548"><span>fiction_Map_of_Val_ins_perm_projection_half_BYTE</span></a><span class="main"><span class="main"><span>,</span></span></span><span>
              </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> k</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="free"><span>cblk</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> k'</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="free"><span>blk</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> idx1</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="free"><span>idx</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> u_idx1</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="free"><span>u_idx</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span>
              </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.split_discrete_ExBI|fact"><span>split_discrete_ExBI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_image_mem_iff|fact"><span>inj_image_mem_iff</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.inj_discrete|fact"><span>inj_discrete</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_26252..26257"><span>simp1</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_26173..26178"><span>prems</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.mul_carrier_option_def|fact"><span>mul_carrier_option_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.Option.option.pred_True|fact"><span>option.pred_True</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.allocate_rule|fact"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.allocate_rule|thm"><span>allocate_rule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>blk</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>null_blk</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>v</span></span><span class="main"><span>∈</span></span><span class="free"><span>U</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="free"><span>TY</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>𝗉𝗋𝗈𝖼</span></a></span><span> </span><span>R.φR_allocate_res_entry</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>blk</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>null_blk</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>U</span></span><span> </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦃</span></a></span><span> </span><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.Void|const"><span>Void</span></a><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⟼</span></a></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>ret</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>(</span></span><span class="bound"><span>blk</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span>φ</span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.Itself|const"><span>Itself</span></a><span>
                  </span><span class="keyword1"><span>𝗌𝗎𝖻𝗃</span></span><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>ret</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.\&lt;phi&gt;arg.\&lt;phi&gt;arg|const"><span>φarg</span></a><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>blk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>null_blk</span></span><span>  </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦄</span></a></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise_def|fact"><span>Premise_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_27481..27486">prems</span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="operator"><span>-</span></span><span>

  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.pointwise_set_UNIV|fact"><span>pointwise_set_UNIV</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.\&lt;F&gt;_functional_condition_Map_of_Val_ins_dom|fact"><span>ℱ_functional_condition_Map_of_Val_ins_dom</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>t1</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>U</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17476..17486"><span>Val_of_Rep</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>v</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>v</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_27481..27486"><span>prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
       </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17476..17486"><span>Val_of_Rep</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>}</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_27881..27885">rule</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.sep_refinement_stepwise|fact"><span>sep_refinement_stepwise</span></a><span class="main"><span>[</span></span><span>
        </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_frame|fact"><span>refinement_frame</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>Rep_of_Val_ins.ℱ_functional_refinement'</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
           </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.sep_refinement_stepwise|fact"><span>sep_refinement_stepwise</span></a><span class="main"><span class="main"><span>[</span></span></span><span>
                    </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_frame|fact"><span>refinement_frame</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement&apos;|fact"><span>Map_of_Val_ins.ℱ_functional_refinement'</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span>
                       </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_refinement&apos;|fact"><span>pointwise_to_share.ℱ_functional_refinement'</span></a><span class="main"><span class="main"><span class="main"><span>[</span></span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> B</span><span class="main"><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins|const"><span>Map_of_Val_ins</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>B</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span></span></span></span><span> </span><span class="skolem"><span>B</span></span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.defined_set_in_image|fact"><span>defined_set_in_image</span></a><span class="main"><span class="main"><span class="main"><span>]</span></span></span></span><span>
                       </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_projection|fact"><span>pointwise_to_share.ℱ_functional_projection</span></a><span class="main"><span class="main"><span>,</span></span></span><span>
                    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> B6</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18140..18154"><span>Rep_of_Val_ins</span></a><span> </span><span class="free"><span>TY</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>B</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span></span></span><span> </span><span class="skolem"><span>B</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.defined_set_in_image|fact"><span>defined_set_in_image</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span>
        </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> a35</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> B22</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span>,</span></span><span>
        </span><span class="operator"><span>simplified</span></span><span class="main"><span>,</span></span><span>
        </span><span class="operator"><span>OF</span></span><span> _ _ _ </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projections_stepwise_UNIV_paired|fact"><span>refinement_projections_stepwise_UNIV_paired</span></a><span class="main"><span class="main"><span>[</span></span></span><span>
            </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_projection|fact"><span>Map_of_Val_ins.ℱ_functional_projection</span></a><span>
               </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_projection|fact"><span>pointwise_to_share.ℱ_functional_projection</span></a><span class="main"><span class="main"><span>,</span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> Dc</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span>
            </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span class="quoted"><span>"</span><span>__allocate_rule_3__</span><span>"</span></span><span class="main"><span class="main"><span>[</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> U </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>U</span></span><span> </span><span class="main"><span>}</span></span><span>›</span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> U'</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>U</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_comp|fact"><span>ℱ_functional_comp</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> Df</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="main"><span>]</span></span></span><span>
               </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.one_option_def|fact"><span>one_option_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_27881..27885"><span>rule</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18545..18568"><span>Rep_of_Val_ins_dom_eval</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_27481..27486"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18727..18768"><span>ℱ_functional_condition_Rep_of_Val_ins_dom</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>R.in_invariant</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_image_mem_iff|fact"><span>inj_image_mem_iff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>R.in_invariant</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Ball_def|fact"><span>Ball_def</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.dom1_dom|fact"><span>dom1_dom</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom_map_option_comp|fact"><span>dom_map_option_comp</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_27481..27486"><span>prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.setter_rule|fact"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.setter_rule|thm"><span>setter_rule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_29484..29486">EQ</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="free"><span>cblk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blk</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.valid_index|const"><span>valid_index</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>idx</span></span><span>
      </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="free"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_type|const"><span>index_type</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>idx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>𝗉𝗋𝗈𝖼</span></a></span><span> </span><span>R.φR_set_res</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.map_fun_atS|const"><span>map_fun_atS</span></a><span> </span><span class="free"><span>cblk</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.map_discrete|const"><span>map_discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17594..17601"><span>map_Rep</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>cblk</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="free"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦃</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>(</span></span><span class="free"><span>blk</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>u_idx</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span>φ</span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.Itself|const"><span>Itself</span></a><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⟼</span></a></span><span>
              </span><span class="main"><span>λ</span></span><span class="bound"><span>𝗋𝖾𝗍</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>(</span></span><span class="free"><span>blk</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span>φ</span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.Itself|const"><span>Itself</span></a><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦄</span></a></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise_def|fact"><span>Premise_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_29484..29486"><span>EQ</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise_def|fact"><span>Premise_def</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span class="quoted"><span>"</span><span>_setter_rule_2_</span><span>"</span></span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>h</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.map_discrete|const"><span>map_discrete</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17594..17601"><span>map_Rep</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value|const"><span>index_mod_value</span></a><span> </span><span class="skolem"><span>cidx</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
                        </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> V</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_value|const"><span>index_value</span></a><span> </span><span class="skolem"><span>idx</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>u_idx</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
                        </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> F</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="skolem"><span>idx</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Phi_BI.Map_of_Tree.html#Map_of_Tree.push_map|const"><span>‣<span class="hidden">⇩</span><sub>m</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
                        </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span></span></span><span> </span><span class="skolem"><span>idx</span></span><span> </span><span class="skolem"><span>cidx</span></span><span> </span><span class="skolem"><span>v</span></span><span> </span><span class="skolem"><span>u_idx</span></span><span class="main"><span class="main"><span>,</span></span></span><span>
                      </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>,</span></span></span><span>
                      </span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_19318..19365"><span>fiction_Map_of_Val_perm_partial_refinement_BYTE</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span>
                           </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_22352..22395"><span>fiction_Map_of_Val_ins_perm_projection_BYTE</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.split_discrete_meta_all|fact"><span>split_discrete_meta_all</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_image_mem_iff|fact"><span>inj_image_mem_iff</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value_welltyp|fact"><span>index_mod_value_welltyp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex_def|fact"><span>Bex_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17705..17719"><span>Val_of_Rep_inj</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/PhSm_Ag_Base.html#PhSm_Ag_Base.index_mod_value_welltyp|fact"><span>index_mod_value_welltyp</span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_24985..24991"><span>map_Rep_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.deallocate_rule|fact"><span class="entity_def" id="PhSem_MoV.perm_MoV_fiction.deallocate_rule|thm"><span>deallocate_rule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="keyword1"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Normal_Premise|const"><span>𝗉𝗋𝖾𝗆𝗂𝗌𝖾</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Semantics_Framework.html#Phi_Semantics_Framework.Well_Type|const"><span>Well_Type</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>𝗉𝗋𝗈𝖼</span></a></span><span> </span><span>R.φR_set_res</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.map_fun_atS|const"><span>map_fun_atS</span></a><span> </span><span class="free"><span>blk</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦃</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>(</span></span><span class="free"><span>blk</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.map_option|const"><span>map_option</span></a><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val|const"><span>Map_of_Val</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span>φ</span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.Itself|const"><span>Itself</span></a><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⟼</span></a></span><span>
        </span><span class="main"><span>λ</span></span><span class="bound"><span>𝗋𝖾𝗍</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span>φ</span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_BI.html#Phi_BI.Itself|const"><span>Itself</span></a><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.\&lt;phi&gt;Procedure_no_exception|const"><span>⦄</span></a></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise_def|fact"><span>Premise_def</span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="entity_def" id="offset_31354..31359">prems</span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.empty|const"><span>Map.empty</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.empty|const"><span>Map.empty</span></a><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_image_mem_iff|fact"><span>inj_image_mem_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.pointwise_set_UNIV|fact"><span>pointwise_set_UNIV</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.\&lt;F&gt;_functional_condition_Map_of_Val_ins_dom|fact"><span>ℱ_functional_condition_Map_of_Val_ins_dom</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>
       </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.\&lt;F&gt;_functional_comp|fact"><span>ℱ_functional_comp</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>(∘)</span></a></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.to_share|const"><span>to_share</span></a><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> Df</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_17476..17486"><span>Val_of_Rep</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>v</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_31354..31359"><span>prems</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_31745..31750">rule1</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projections_stepwise_UNIV_paired|fact"><span>refinement_projections_stepwise_UNIV_paired</span></a><span class="main"><span>[</span></span><span>
          </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_projection|fact"><span>Map_of_Val_ins.ℱ_functional_projection</span></a><span>
             </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_projection|fact"><span>pointwise_to_share.ℱ_functional_projection</span></a><span class="main"><span>,</span></span><span>
          </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> Dc</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span class="main"><span>,</span></span><span>
          </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span class="quoted"><span>"</span><span>_setter_rule_2_</span><span>"</span></span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> V</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="skolem"><span>v</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> F</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span></span></span><span> </span><span class="skolem"><span>v</span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_source_subjection|fact"><span>refinement_source_subjection</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.impI|fact"><span>impI</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
        </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.sep_refinement_stepwise|fact"><span>sep_refinement_stepwise</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span>
            </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_frame|fact"><span>refinement_frame</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>Rep_of_Val_ins.ℱ_functional_refinement</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
               </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.sep_refinement_stepwise|fact"><span>sep_refinement_stepwise</span></a><span class="main"><span class="main"><span>[</span></span></span><span>
                        </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Phi_Fiction.html#Phi_Fiction.refinement_frame|fact"><span>refinement_frame</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.Map_of_Val_ins.\&lt;F&gt;_functional_refinement|fact"><span>Map_of_Val_ins.ℱ_functional_refinement</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
                           </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_refinement|fact"><span>pointwise_to_share.ℱ_functional_refinement</span></a><span>
                           </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Resource_Template.html#Resource_Template.pointwise_to_share.\&lt;F&gt;_functional_projection|fact"><span>pointwise_to_share.ℱ_functional_projection</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> a16</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> b16</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> TY16</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span>
            </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_18727..18768"><span>ℱ_functional_condition_Rep_of_Val_ins_dom</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Presburger.html#Presburger.presburger|method"><span class="operator"><span>presburger</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_31354..31359"><span>prems</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_31745..31750"><span>rule1</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_31354..31359"><span>prems</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Phi_Semantics/Phi_System.Phi_Fictions.html#Phi_Fictions.refinement_projections_stepwise_UNIV_paired|fact"><span>refinement_projections_stepwise_UNIV_paired</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>prefer</span></span></span></span></span><span> 2
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_31745..31750"><span>rule1</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_31354..31359"><span>prems</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span>Rep_of_Val_ins.ℱ_functional_projection</span><span>
      </span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics_Framework/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> S</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Phi_Semantics_Framework/Phi_BI.Algebras.html#Algebras.discrete.discrete|const"><span>discrete</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Rep_of_Val</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> TY</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>typ_of_blk</span></span><span> </span><span class="free"><span>blk</span></span><span>›</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#offset_31354..31359"><span>prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>



</span><span class="keyword1"><span class="command"><span class="entity_def" id="PhSem_MoV.MovI.fiction_Map_of_Val_ins_perm_projection_half_BYTE|fact"><span class="entity_def" id="PhSem_MoV.MovI.fiction_Map_of_Val_ins_perm_projection_BYTE|fact"><span class="entity_def" id="PhSem_MoV.MovI.fiction_Map_of_Val_perm_partial_refinement_BYTE|fact"><span class="entity_def" id="PhSem_MoV.MovI.\&lt;F&gt;_functional_condition_Rep_of_Val_ins_dom|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_dom_eval|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_eval|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_dom_def|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_def|fact"><span class="entity_def" id="PhSem_MoV.MovI.split_Byte_Rep_ExSet|fact"><span class="entity_def" id="PhSem_MoV.MovI.Val_of_Rep_inj|fact"><span class="entity_def" id="PhSem_MoV.MovI.map_Rep_def|fact"><span class="entity_def" id="PhSem_MoV.MovI.Val_of_Rep_def|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_inj|fact"><span class="entity_def" id="PhSem_MoV.MovI.MoV_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.\&lt;F&gt;_functional_refinement&apos;|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.\&lt;F&gt;_functional_refinement|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.\&lt;F&gt;_functional_refinement_complex|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.cancl_sep_orthogonal_monoid_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.\&lt;F&gt;_functional_projection|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.simple_homo_mul|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal_monoid_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.one_in_D|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal_1_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_one|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_one_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal&apos;|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_join_sub|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_join_sub_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_sep_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_disj_homo_semi|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_sep_disj_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_mult|fact"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_sep_mult_axioms|fact"><span class="entity_def" id="PhSem_MoV.MovI.fiction_Map_of_Val_ins_perm_projection_half_BYTE|thm"><span class="entity_def" id="PhSem_MoV.MovI.fiction_Map_of_Val_ins_perm_projection_BYTE|thm"><span class="entity_def" id="PhSem_MoV.MovI.fiction_Map_of_Val_perm_partial_refinement_BYTE|thm"><span class="entity_def" id="PhSem_MoV.MovI.\&lt;F&gt;_functional_condition_Rep_of_Val_ins_dom|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_dom_def|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_def|thm"><span class="entity_def" id="PhSem_MoV.MovI.split_Byte_Rep_ExSet|thm"><span class="entity_def" id="PhSem_MoV.MovI.map_Rep_def|thm"><span class="entity_def" id="PhSem_MoV.MovI.Val_of_Rep_def|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_inj|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.\&lt;F&gt;_functional_refinement&apos;|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.\&lt;F&gt;_functional_refinement|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.\&lt;F&gt;_functional_refinement_complex|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.\&lt;F&gt;_functional_projection|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.one_in_D|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_join_sub|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_mult|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_dom_eval(2)|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_dom_eval(1)|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_eval(2)|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_eval(1)|thm"><span class="entity_def" id="PhSem_MoV.MovI.Val_of_Rep_inj|thm"><span class="entity_def" id="PhSem_MoV.MovI.MoV_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.cancl_sep_orthogonal_monoid_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.simple_homo_mul|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal_monoid_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal_1_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_one|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_one_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal&apos;|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_orthogonal_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_join_sub_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_sep_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.sep_disj_homo_semi|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_sep_disj_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins.homo_sep_mult_axioms|thm"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins_dom|const"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_Val_ins|const"><span class="entity_def" id="PhSem_MoV.MovI.Rep_of_TY|const"><span class="entity_def" id="PhSem_MoV.MovI.map_Rep|const"><span class="entity_def" id="PhSem_MoV.MovI.Val_of_Rep|const"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> MovI</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Phi_Semantics.PhSem_MoV.html#PhSem_MoV.MoV|locale"><span>MoV</span></a><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>