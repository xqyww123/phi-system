<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Phi_BI.Phi_Preliminary</title>
</head>


<body>
<div class="head">
<h1>Theory Phi_BI.Phi_Preliminary</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>chapter</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Theoretical Foundations›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Preliminary›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Phi_BI.Phi_Preliminary.html"><span>Phi_Preliminary</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../../HOL/HOL/Main.html"><span>Main</span></a><span> </span><span class="quoted"><span>"</span><a href="Phi_BI.Algebras.html"><span>Phi_BI.Algebras</span></a><span>"</span></span><span> </span><a href="Phi_BI.PhiTool_Symbol.html"><span>PhiTool_Symbol</span></a><span> </span><a href="Phi_BI.Phi_Aug.html"><span>Phi_Aug</span></a><span>
          </span><a href="Phi_Logic_Programming_Reasoner.PLPR.html"><span>Phi_Logic_Programming_Reasoner.PLPR</span></a><span>
          </span><a href="Phi_Logic_Programming_Reasoner.PLPR_error_msg.html"><span>Phi_Logic_Programming_Reasoner.PLPR_error_msg</span></a><span>
          </span><a href="Phi_BI.Arrow_st.html"><span>Phi_BI.Arrow_st</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>keywords</span></span></span><span> </span><span class="quoted"><span>"optional_translations"</span></span><span> </span><span class="main"><span>::</span></span><span> thy_decl
       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span>"optional_translation_group"</span></span><span> </span><span class="main"><span>::</span></span><span> thy_decl
       </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span>"φadhoc_overloading"</span></span><span> </span><span class="quoted"><span>"φno_adhoc_overloading"</span></span><span> </span><span class="main"><span>::</span></span><span> thy_decl
  </span><span class="keyword2"><span class="keyword"><span>abbrevs</span></span></span><span> </span><span class="quoted"><span>"&lt;implies&gt;"</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>"𝗂𝗆𝗉𝗅𝗂𝖾𝗌"</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span>"&lt;suffices&gt;"</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>"𝗌𝗎𝖿𝖿𝗂𝖼𝖾𝗌"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="comment1"><span>(* declare [[ML_debugger, ML_exception_debugger, ML_print_depth=100]] *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Named Theorems›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Phi_Expansions</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>initial_ss</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset_Configure.Empty_SS</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>binding</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">binding</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;expns|attribute"><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;expns|fact"><span>φexpns</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>comment</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"Semantics Expansions, used to expand assertions semantically."</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>attribute</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>NONE</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>post_merging</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>I</span><span>
</span><span class="main"><span>)</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Algebras.html#Algebras.set_mult_expn|fact"><span>set_mult_expn</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.\&lt;phi&gt;expns|attribute"><span class="operator"><span>φexpns</span></span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Premise_def|fact"><span>Premise_def</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.\&lt;phi&gt;expns|attribute"><span class="operator"><span>φexpns</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML</span></span></span><span> </span><span class="quoted"><span>‹
</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Phi_Programming_Simp_SS</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>initial_ss</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset_Configure.Empty_SS</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>binding</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">binding</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;programming_simps|attribute"><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;programming_simps|fact"><span>φprogramming_simps</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>comment</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"Simplification rules used in the deductive programming, including the φprogramming_base_simps."</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>attribute</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>NONE</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>post_merging</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>I</span><span>
</span><span class="main"><span>)</span></span><span>
</span><span class="comment1"><span>― ‹A trick: if a φprogramming_simp rule is also declared in the system simpset, just declare it
    by φprogramming_base_simps, and it can improve the performance.›</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Phi_Programming_Base_Simp_SS</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>initial_ss</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset_Configure.Minimal_SS</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>binding</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">binding</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;programming_base_simps|attribute"><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;programming_base_simps|fact"><span>φprogramming_base_simps</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>comment</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"Simplification rules used only in low level automation"</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>attribute</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>NONE</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>post_merging</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>I</span><span>
</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Phi_Programming_Simp_Hook</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Hooks</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>type</span></span></span><span> </span><span class="entity"><span>arg</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>unit</span><span>
  </span><span class="keyword1"><span class="keyword"><span>type</span></span></span><span> </span><span class="entity"><span>state</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Proof.context</span></span><span>
</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>equip_Phi_Programming_Simp</span></span><span> </span><span class="entity"><span>lev</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>lev</span></span><span> </span><span>&gt;=</span><span> </span><span class="inner_numeral"><span>2</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span>
    </span><span>|&gt;</span><span> </span><span>Context_Position.set_visible</span><span> </span><span>false</span><span>
    </span><span>|&gt;</span><span> </span><span class="entity"><span>Phi_Programming_Simp_SS.enhance</span></span><span>
    </span><span>|&gt;</span><span> </span><span class="entity"><span>Phi_Programming_Simp_Hook.invoke</span></span><span> </span><span class="main"><span>(</span></span><span>Context.Proof</span><span> </span><span class="entity"><span>ctxt</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span>
    </span><span>|&gt;</span><span> </span><span>Context_Position.restore_visible</span><span> </span><span class="entity"><span>ctxt</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span>
    </span><span>|&gt;</span><span> </span><span>Context_Position.set_visible</span><span> </span><span>false</span><span>
    </span><span>|&gt;</span><span> </span><span class="entity"><span>Phi_Programming_Simp_SS.enhance</span></span><span> </span><span>o</span><span> </span><span class="entity"><span>Phi_Programming_Base_Simp_SS.equip</span></span><span>
    </span><span>|&gt;</span><span> </span><span class="entity"><span>Phi_Programming_Simp_Hook.invoke</span></span><span> </span><span class="main"><span>(</span></span><span>Context.Proof</span><span> </span><span class="entity"><span>ctxt</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span>
    </span><span>|&gt;</span><span> </span><span>Context_Position.restore_visible</span><span> </span><span class="entity"><span>ctxt</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>signature</span></span></span><span> </span><span class="entity"><span>PHI_TYPE_ALGEBRA_DERIVERS</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>sig</span></span></span><span>
</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> Expansion </span><span class="main"><span>:</span></span><span> </span><span class="entity"><span>SIMPSET</span></span><span> </span><span class="comment1"><span>(*The standard simpset for deriving*)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Phi_Type_Algebra_Derivers</span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="entity"><span>PHI_TYPE_ALGEBRA_DERIVERS</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>struct</span></span></span><span>
</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Expansion</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>initial_ss</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Simpset_Configure.Minimal_SS</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>binding</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">binding</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;deriver_simps|attribute"><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;deriver_simps|fact"><span>φderiver_simps</span></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>comment</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"Rules unfolding constraints and conditions in property deriving of φ-type algebra.\n\
                \Basically, simplification rules for object operators including mappers, relators, \
                \predicators of the abstract algebra of φ-types"</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>attribute</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>NONE</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>post_merging</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>I</span><span>
</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

›</span></span><span>

</span><span class="keyword1"><span class="command"><span>setup</span></span></span><span> </span><span class="quoted"><span>‹</span><span>Context.theory_map</span><span> </span><span class="main"><span>(</span></span><span>
     </span><span class="entity"><span>Phi_Programming_Base_Simp_SS.map</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
       </span><span class="entity"><span>ctxt</span></span><span> </span><span>addsimprocs</span><span> </span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">simproc</span><span class="hidden">&gt;</span></span></span><span>‹</span><span>NO_MATCH</span><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">simproc</span><span class="hidden">&gt;</span></span></span><span>‹</span><span>defined_All</span><span>›</span></span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">simproc</span><span class="hidden">&gt;</span></span></span><span>‹</span><span>defined_Ex</span><span>›</span></span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>
  </span><span>#&gt;</span><span> </span><span class="entity"><span>Phi_Programming_Simp_Hook.add</span></span><span> </span><span class="inner_numeral"><span>1000</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
       </span><span class="entity"><span>ctxt</span></span><span> </span><span>delsimps</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms'</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.One_nat_def|fact"><span>One_nat_def</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span><span>



</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Error Mechanism›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/error.ML.html"><span>‹library/tools/error.ML›</span></a></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Helper ML›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/Phi_Help.ML.html"><span>‹library/tools/Phi_Help.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/lift_type_sort.ML.html"><span>‹library/tools/lift_type_sort.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/syntax/helps.ML.html"><span>‹library/syntax/helps.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/system/Phi_Envir0.ML.html"><span>‹library/system/Phi_Envir0.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/system/Phi_ID.ML.html"><span>‹library/system/Phi_ID.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/Hasher.ML.html"><span>‹library/tools/Hasher.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/cache_file.ML.html"><span>‹library/tools/cache_file.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/thy_hacks.ML.html"><span>‹library/tools/thy_hacks.ML›</span></a></span><span>


</span><span class="comment1"><span>(*
A JSON lib. Maybe one day in the cache file we will use JSON (or better some K-V data base)
instead of XML. I'm thinking of the performance of the XML, particularly we have a lot of
`&lt;` and `&gt;` symbols. Need some tests.

ML_file ‹contrib/sml-json/json.sig›
ML_file ‹contrib/sml-setmap/map/MONO_MAP.sig›
ML_file ‹contrib/sml-setmap/map/OrderMapImpl.sml›
ML_file ‹contrib/sml-setmap/map/OrderMap.sml›
ML_file ‹contrib/sml-setmap/map/StringMap.sml›
ML_file ‹contrib/sml-json/json.sml› *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Helper Methods›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>method_setup</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.subgoal&apos;|method"><span>subgoal'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹
     </span><span>Scan.lift</span><span> </span><span class="main"><span>(</span></span><span>Scan.option</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>premises</span></span><span>›</span></span></span><span> </span><span>|--</span><span> </span><span>Parse.binding</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span>--</span><span> </span><span>Scan.lift</span><span> </span><span class="main"><span>(</span></span><span>Scan.option</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">keyword</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="keyword2"><span>for</span></span><span>›</span></span></span><span> </span><span>|--</span><span> </span><span>Parse.and_list</span><span> </span><span class="main"><span>(</span></span><span>Scan.repeat1</span><span> </span><span>Parse.binding</span><span class="main"><span>)</span></span><span> </span><span>&gt;&gt;</span><span> </span><span>flat</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span>--</span><span> </span><span>Scan.lift</span><span> </span><span class="main"><span>(</span></span><span>Parse.token</span><span> </span><span>Parse.embedded</span><span class="main"><span>)</span></span><span> </span><span>&gt;&gt;</span><span>
 </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="entity"><span>prem_b</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>fixes</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>text_tok</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>rules</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>FOCUS</span></span><span> </span><span class="entity"><span>tac</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>i</span></span><span> </span><span class="entity"><span>st</span></span><span> </span><span class="main"><span>=</span></span><span>
        </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>Thm.nprems_of</span><span> </span><span class="entity"><span>st</span></span><span> </span><span>&lt;</span><span> </span><span class="entity"><span>i</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span>Seq.empty</span><span>
        </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>args</span></span><span> </span><span class="keyword1"><span class="keyword"><span>as</span></span></span><span> </span><span class="main"><span>{</span></span><span>context </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>ctxt'</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>params</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>asms</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>prems</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>...</span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>st'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
                    </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>is_some</span><span> </span><span class="entity"><span>prem_b</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="entity"><span>Subgoal.focus</span></span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="entity"><span>Subgoal.focus_params_fixed</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>i</span></span><span> </span><span class="entity"><span>fixes</span></span><span> </span><span class="entity"><span>st</span></span><span>
                 </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ctxt'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>case</span></span></span><span> </span><span class="entity"><span>prem_b</span></span><span> </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span> </span><span>SOME</span><span> </span><span class="entity"><span>b</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
                                    </span><span>Proof_Context.note_thms</span><span> </span><span class="inner_quoted"><span>""</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="entity"><span>b</span></span><span class="main"><span>,</span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>th</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="entity"><span>th</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>prems</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>ctxt'</span></span><span>
                                      </span><span>|&gt;</span><span> </span><span>snd</span><span>
                                </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>ctxt'</span></span><span>
              </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>Seq.lifts</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Subgoal.retrofit</span></span><span> </span><span class="entity"><span>ctxt'</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>params</span></span><span> </span><span class="entity"><span>asms</span></span><span> </span><span class="entity"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>tac</span></span><span> </span><span class="entity"><span>ctxt'</span></span><span> </span><span class="entity"><span>st'</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>st</span></span><span>
             </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
   </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>Context_Tactic.CONTEXT_TACTIC</span></span><span> </span><span class="main"><span>(</span></span><span>HEADGOAL</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>FOCUS</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>text</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>src</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Method.read_closure_input</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>(</span></span><span>Token.input_of</span><span> </span><span class="entity"><span>text_tok</span></span><span class="main"><span>)</span></span><span>
       </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>Context_Tactic.NO_CONTEXT_TACTIC</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Method.evaluate_runtime</span></span><span> </span><span class="entity"><span>text</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>rules</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>ctxt</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>)</span></span><span>
›</span></span><span>

</span><span class="keyword1"><span class="command"><span>method_setup</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prefer_tac|method"><span>prefer_tac</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹
    </span><span>Scan.lift</span><span> </span><span>Parse.nat</span><span> </span><span>--</span><span> </span><span>Scan.lift</span><span> </span><span>Parse.nat</span><span>
  </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>j</span></span><span class="main"><span>,</span></span><span class="entity"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
  </span><span class="entity"><span>Context_Tactic.CONTEXT_TACTIC</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>th</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>Thm.nprems_of</span><span> </span><span class="entity"><span>th</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_numeral"><span>0</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span>Seq.empty</span><span>
    </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span>Seq.single</span><span> </span><span class="main"><span>(</span></span><span>Thm.permute_prems</span><span> </span><span class="entity"><span>j</span></span><span> </span><span class="entity"><span>k</span></span><span> </span><span class="entity"><span>th</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
›</span></span><span>



</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Helper Lemmas›</span></span></span><span>

</span><span class="comment1"><span>(*TODO: IMPROVE ME!*)</span></span><span>

</span><span class="comment1"><span>(*declare Suc_le_eq[simp]*)</span></span><span>
</span><span class="comment1"><span>(*
lemma [simp]: ‹{ia. ia &lt; Suc i } - {i} = {ia. ia &lt; i}› for i :: nat
  by fastforce
*)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.proj_eq_pair_eq|fact"><span class="entity_def" id="Phi_Preliminary.proj_eq_pair_eq|thm"><span>proj_eq_pair_eq</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>y</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.expand|fact"><span>prod.expand</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.fst_snd_If_pair|fact"><span class="entity_def" id="Phi_Preliminary.fst_snd_If_pair(2)|thm"><span class="entity_def" id="Phi_Preliminary.fst_snd_If_pair(1)|thm"><span>fst_snd_If_pair</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>If</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>,</span></span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>If</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>If</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>,</span></span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>If</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>d</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>



</span><span class="comment1"><span>(*
lemma [simp]:
  ‹list_all2 (λx y. snd x = snd y ∧ fst x = fst y) = (=)›
  by (auto simp: fun_eq_iff,
      smt (verit, ccfv_SIG) list.rel_eq list_all2_mono surjective_pairing,
      simp add: list.rel_refl)
*)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.imp_implication|fact"><span class="entity_def" id="Phi_Preliminary.imp_implication|thm"><span>imp_implication</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.comb.K_app|fact"><span>comb.K_app</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.comb.K_comp|fact"><span>comb.K_comp</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.comb.K_comp&apos;|fact"><span>comb.K_comp'</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.case_sum_collapse|fact"><span class="entity_def" id="Phi_Preliminary.case_sum_collapse|thm"><span>case_sum_collapse</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Sum_Type.html#Sum_Type.sum.case_sum|const"><span>case_sum</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Sum_Type.html#Sum_Type.Inl|const"><span>Inl</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Sum_Type.html#Sum_Type.Inr|const"><span>Inr</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Sum_Type.html#Sum_Type.split_sum_all|fact"><span>split_sum_all</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.snd_o_Pair_eq_id|fact"><span class="entity_def" id="Phi_Preliminary.snd_o_Pair_eq_id|thm"><span>snd_o_Pair_eq_id</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.apfst_id&apos;|fact"><span class="entity_def" id="Phi_Preliminary.apfst_id&apos;|thm"><span>apfst_id'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(*
lemma stupid_pair_eq_prj3[simp]:
  ‹snd (snd x) = snd (snd y) ∧ fst (snd x) = fst (snd y) ∧ fst x = fst y ⟷ x = y›
  by (meson prod.expand)
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/help_lemmas.ML.html"><span>‹library/tools/help_lemmas.ML›</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.nested_case_prod|fact"><span class="entity_def" id="Phi_Preliminary.nested_case_prod|thm"><span>nested_case_prod</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.\&lt;phi&gt;programming_simps|attribute"><span class="operator"><span>φprogramming_simps</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_distrib|fact"><span>prod.case_distrib</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.\&lt;phi&gt;programming_simps|attribute"><span class="operator"><span>φprogramming_simps</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.case_prod_app|fact"><span>BNF_Fixpoint_Base.case_prod_app</span></a><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_distrib|fact"><span>prod.case_distrib</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> h</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> f</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_distrib|fact"><span>prod.case_distrib</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> h</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> f</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_distrib|fact"><span>prod.case_distrib</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> h</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>map_prod</span></a><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>and</span></span></span></span><span> f</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.\&lt;phi&gt;programming_simps|attribute"><span class="operator"><span>φprogramming_simps</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst_def|fact"><span>fst_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd_def|fact"><span>snd_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>setup</span></span></span><span> </span><span class="quoted"><span>‹</span><span>Context.theory_map</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Phi_Safe_Simps.map</span></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="entity"><span>Simplifier.add_cong</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm'</span></span><span> </span><a class="entity_ref" href="Phi_BI.PhiTool_Symbol.html#PhiTool_Symbol.mk_symbol_cong|fact"><span>mk_symbol_cong</span></a><span class="antiquote"><span>}</span></span></span></span><span>
</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span><span>

</span><span class="comment1"><span>(*simproc_setup case_prod_app (‹(case_prod f x) y›) = ‹fn _ =&gt; fn ctxt =&gt; fn ctm =&gt;
  let val (Const(<span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span>‹case_prod›, _) $ f $ x $ y) = Thm.term_of ctm
   in SOME (Conv.rewr_conv @{thm' BNF_Fixpoint_Base.case_prod_app} ctm)
  end
›

lemma
  ‹ (case x of (a,b) ⇒ f a b) y = (case x of (a,b) ⇒ f a b y) ›
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Simple Boolean Conversions›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.boolean_conversions|fact"><span class="entity_def" id="Phi_Preliminary.boolean_conversions(6)|thm"><span class="entity_def" id="Phi_Preliminary.boolean_conversions(5)|thm"><span class="entity_def" id="Phi_Preliminary.boolean_conversions(4)|thm"><span class="entity_def" id="Phi_Preliminary.boolean_conversions(3)|thm"><span class="entity_def" id="Phi_Preliminary.boolean_conversions(2)|thm"><span class="entity_def" id="Phi_Preliminary.boolean_conversions(1)|thm"><span>boolean_conversions</span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub></span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>W</sub><span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>W</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>W</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>W</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>W</sub><span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>W</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>W</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>W</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>E</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Setup Safe Simpset›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>method_setup</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.\&lt;phi&gt;safe_simp|method"><span>φsafe_simp</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹
</span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>no_asmN</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"no_asm"</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>no_asm_useN</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"no_asm_use"</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>no_asm_simpN</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"no_asm_simp"</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>asm_lrN</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"asm_lr"</span></span><span class="main"><span>;</span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>conv_mode</span></span><span> </span><span class="entity"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>Args.parens</span><span> </span><span class="main"><span>(</span></span><span>Args.$$$</span><span> </span><span class="entity"><span>no_asmN</span></span><span class="main"><span>)</span></span><span> </span><span>&gt;&gt;</span><span> </span><span>K</span><span> </span><span class="entity"><span>simp_tac</span></span><span> </span><span>||</span><span>
        </span><span>Args.parens</span><span> </span><span class="main"><span>(</span></span><span>Args.$$$</span><span> </span><span class="entity"><span>no_asm_simpN</span></span><span class="main"><span>)</span></span><span> </span><span>&gt;&gt;</span><span> </span><span>K</span><span> </span><span class="entity"><span>asm_simp_tac</span></span><span> </span><span>||</span><span>
        </span><span>Args.parens</span><span> </span><span class="main"><span>(</span></span><span>Args.$$$</span><span> </span><span class="entity"><span>no_asm_useN</span></span><span class="main"><span>)</span></span><span> </span><span>&gt;&gt;</span><span> </span><span>K</span><span> </span><span class="entity"><span>full_simp_tac</span></span><span> </span><span>||</span><span>
        </span><span>Scan.succeed</span><span> </span><span class="entity"><span>asm_full_simp_tac</span></span><span class="main"><span>)</span></span><span> </span><span>|&gt;</span><span> </span><span>Scan.lift</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>x</span></span><span class="main"><span>;</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>conv_mode</span></span><span> </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>simp</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
    </span><span class="entity"><span>Method.METHOD</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ths</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>Method.insert_tac</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>ths</span></span><span> </span><span class="inner_numeral"><span>1</span></span><span> </span><span>THEN</span><span> </span><span class="entity"><span>simp</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Phi_Safe_Simps.equip</span></span><span> </span><span class="entity"><span>ctxt</span></span><span class="main"><span>)</span></span><span> </span><span class="inner_numeral"><span>1</span></span><span> </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><a class="entity_ref" href="HOL-Library.Finite_Map.html#Finite_Map.fmdom_fmupd|fact"><span>fmdom_fmupd</span></a><span> </span><a class="entity_ref" href="HOL-Library.Finite_Map.html#Finite_Map.fmdom_empty|fact"><span>fmdom_empty</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.finsert_iff|fact"><span>finsert_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.FSet.html#FSet.fempty_iff|fact"><span>fempty_iff</span></a><span>
    </span><a class="entity_ref" href="Phi_BI.PhiTool_Symbol.html#PhiTool_Symbol.symbol.mk_symbol_inject|fact"><span>mk_symbol_inject</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Finite_Map.html#Finite_Map.fmadd_empty|fact"><span>fmadd_empty</span></a><span> </span><a class="entity_ref" href="HOL-Library.Finite_Map.html#Finite_Map.fmadd_idempotent|fact"><span>fmadd_idempotent</span></a><span>
    </span><a class="entity_ref" href="HOL-Library.Finite_Map.html#Finite_Map.fmadd_assoc|fact"><span>fmadd_assoc</span></a><span> </span><a class="entity_ref" href="HOL-Library.Finite_Map.html#Finite_Map.fmadd_fmupd|fact"><span>fmadd_fmupd</span></a><span> </span><a class="entity_ref" href="HOL-Library.Finite_Map.html#Finite_Map.fmupd_idem|fact"><span>fmupd_idem</span></a><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transfer.html#Transfer.rel_fun_eq|fact"><span>rel_fun_eq</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Helper Attributes \&amp; Tactics›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>attribute_setup</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.rotated|attribute"><span>rotated</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹</span><span>Scan.lift</span><span> </span><span class="main"><span>(</span></span><span>Scan.optional</span><span> </span><span>Parse.int</span><span> </span><span class="inner_numeral"><span>1</span></span><span> </span><span>--</span><span> </span><span>Scan.optional</span><span> </span><span>Parse.int</span><span> </span><span class="inner_numeral"><span>0</span></span><span class="main"><span>)</span></span><span> </span><span>&gt;&gt;</span><span>
  </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>k</span></span><span class="main"><span>,</span></span><span class="entity"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Thm.rule_attribute</span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Thm.permute_prems</span><span> </span><span class="entity"><span>j</span></span><span> </span><span class="entity"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span><span>
  </span><span class="quoted"><span>‹Enhanced version of the Pure.rotated›</span></span><span>

</span><span class="keyword1"><span class="command"><span>attribute_setup</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.TRY_THEN|attribute"><span>TRY_THEN</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span>Scan.lift</span><span> </span><span class="main"><span>(</span></span><span>Scan.optional</span><span> </span><span class="main"><span>(</span></span><span>Args.bracks</span><span> </span><span>Parse.nat</span><span class="main"><span>)</span></span><span> </span><span class="inner_numeral"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span>--</span><span> </span><span class="entity"><span>Attrib.thm</span></span><span>
      </span><span>&gt;&gt;</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Thm.rule_attribute</span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>B</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>A</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>A</span></span><span> </span><span>RSN</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="keyword"><span>handle</span></span></span><span> </span><span>THM</span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    ›</span></span><span> </span><span class="quoted"><span>"resolution with rule, and do nothing if fail"</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML</span></span></span><span> </span><span class="quoted"><span>‹
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>phi_system_ML_attribute_locker_do_not_override</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Mutex.mutex</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>phi_system_ML_attribute_sender_do_not_override</span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="main"><span>(</span></span><span>morphism</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>Thm.attribute</span><span class="main"><span>)</span></span><span> </span><span>option</span><span> </span><span>Unsynchronized.ref</span><span> </span><span class="main"><span>=</span></span><span>
      </span><span>Unsynchronized.ref</span><span> </span><span>NONE</span><span>
</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>phi_system_read_ML_attribute</span></span><span> </span><span class="entity"><span>generic</span></span><span> </span><span class="entity"><span>src</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Mutex.lock</span><span> </span><span class="entity"><span>phi_system_ML_attribute_locker_do_not_override</span></span><span>
      </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span>   </span><span>ML_Context.expression</span><span> </span><span class="main"><span>(</span></span><span>Input.pos_of</span><span> </span><span class="entity"><span>src</span></span><span class="main"><span>)</span></span><span>
              </span><span class="main"><span>(</span></span><span> </span><span>ML_Lex.read</span><span> </span><span class="inner_quoted"><span>"phi_system_ML_attribute_sender_do_not_override := SOME (("</span></span><span>
              </span><span>@</span><span> </span><span>ML_Lex.read_source</span><span> </span><span class="entity"><span>src</span></span><span>
              </span><span>@</span><span> </span><span>ML_Lex.read</span><span> </span><span class="inner_quoted"><span>") : morphism -&gt; Thm.attribute)"</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>generic</span></span><span>
            </span><span class="keyword3"><span class="keyword"><span>handle</span></span></span><span> </span><span class="entity"><span>err</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span>
              </span><span>Mutex.unlock</span><span> </span><span class="entity"><span>phi_system_ML_attribute_locker_do_not_override</span></span><span class="main"><span>;</span></span><span>
              </span><span class="keyword3"><span class="keyword"><span>raise</span></span></span><span> </span><span class="entity"><span>err</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>attr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="entity"><span class="entity"><span class="entity"><span class="entity"><span class="entity"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>print</span></span><span class="antiquote"><span>}</span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span>!</span><span class="entity"><span>phi_system_ML_attribute_sender_do_not_override</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Mutex.unlock</span><span> </span><span class="entity"><span>phi_system_ML_attribute_locker_do_not_override</span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>attr</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>phi_system_ML_attribute_parser</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>
   </span><span>Scan.lift</span><span> </span><span>Args.internal_attribute</span><span>
</span><span>||</span><span> </span><span>Scan.peek</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Parse.token</span><span> </span><span>Parse.ML_source</span><span> </span><span>&gt;&gt;</span><span>
    </span><span>Token.evaluate</span><span> </span><span>Token.Attribute</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>tok</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> 
</span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>src</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Token.input_of</span><span> </span><span class="entity"><span>tok</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>Morphism.entity</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>phi_system_read_ML_attribute</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>src</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
›</span></span><span>

</span><span class="keyword1"><span class="command"><span>attribute_setup</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.ML_attribute|attribute"><span>ML_attribute</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹
  </span><span class="entity"><span>phi_system_ML_attribute_parser</span></span><span> </span><span>&gt;&gt;</span><span> </span><span>Morphism.form</span><span>›</span></span><span>
  </span><span class="quoted"><span>‹Use ML directly in an attribute without defining a new attribute if you just
  want to use it here specifically›</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Helper Objects›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>consts</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.\&lt;A&gt;infer|const"><span>𝒜infer</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.action|type"><span>action</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Unspecified value›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>consts</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.unspec|const"><span>unspec</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>axiomatization</span></span></span><span> </span><span class="comment1"><span>― ‹this axiomatization is definitional, where it defines the </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>unspec›</span></span></span><span> on product type›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.unspec_prod|fact"><span class="entity_def" id="Phi_Preliminary.unspec_prod|thm"><span class="entity_def" id="Phi_Preliminary.unspec_prod|axiom"><span>unspec_prod</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span class="main"><span>)</span></span><span>›</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Embedding Function into Relation›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Preliminary.embedded_func_def|fact"><span class="entity_def" id="Phi_Preliminary.embedded_func_def|thm"><span class="entity_def" id="Phi_Preliminary.embedded_func_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Preliminary.embedded_func|const"><span>embedded_func</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>embedded_func</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.embedded_func_red|fact"><span class="entity_def" id="Phi_Preliminary.embedded_func_red|thm"><span>embedded_func_red</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.embedded_func|const"><span>embedded_func</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.embedded_func_def|fact"><span>embedded_func_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Big Number›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹A tag to suppress unnecessary expanding of big numbers like </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>2^256›</span></span></span><span>
  (*deprecated! use </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>declare power_numeral[simp del]›</span></span></span><span> instead!*)›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Preliminary.Big_def|fact"><span class="entity_def" id="Phi_Preliminary.Big_def|thm"><span class="entity_def" id="Phi_Preliminary.Big_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="Phi_Preliminary.Big|const"><span>Big</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big|const"><span>Big</span></a><span> </span><span class="numeral"><span>8</span></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>256</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big|const"><span>Big</span></a><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>65536</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big|const"><span>Big</span></a><span> </span><span class="numeral"><span>32</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="numeral"><span>4294967296</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big_def|fact"><span>Big_def</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.numeral_class.numeral|const"><span>numeral</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big|const"><span>Big</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.numeral_class.numeral|const"><span>numeral</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.numeral|class"><span>numeral</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power|class"><span>power</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord|class"><span>ord</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>n</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big|const"><span>Big</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.numeral|class"><span>numeral</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power|class"><span>power</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord|class"><span>ord</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>n</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big|const"><span>Big</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Num.html#Num.numeral|class"><span>numeral</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power|class"><span>power</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord|class"><span>ord</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero|class"><span>zero</span></a><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>n</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="numeral"><span>16</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big|const"><span>Big</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Big_def|fact"><span>Big_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Product›</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹An algorithm of normalizing tuple operations.

Primitive operations:

</span><span class="antiquoted"><span>▪</span></span><span> rotL : left rotation
</span><span class="antiquoted"><span>▪</span></span><span> rotR : right rotation
</span><span class="antiquoted"><span>▪</span></span><span> prod.swap
</span><span class="antiquoted"><span>▪</span></span><span> fst, snd
</span><span class="antiquoted"><span>▪</span></span><span> apfst, apsnd, map_prod

Composite operations are only combined from the primitive operations and functional composition.
</span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>case_prod›</span></span></span><span> is not allowed (because it mixes operations together and cannot be separated any more,
cause certain operations that could be reduced e.g. </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>map (apfst f) o zip_list ≡ zip_list o apfst f›</span></span></span><span>
cannot be reduced any more).

We apply the following normalization strategy to hope two equivalent sequences of the operations can
be normalized to an identical form.

</span><span class="antiquoted"><span>▪</span></span><span> apfst, apsnd, map_prod are aggregated together, and split to each projection when need.
  They are swapped over prod.swap, rotations, down to the left most.
  The reason is, projectors (fst, snd) are always given at the left side, so we hope when the projectors
  meet the apfst, apsnd, map_prod first, their reduction can eliminate irrelevant mappings as early
  as possible.
</span><span class="antiquoted"><span>▪</span></span><span> swap, rotation are reduced if possible, i.e. the following 6 rules
    (S for swap, L for L-rotate, R for R-rotate, A B for A o B, rewrites from LHS to RHS)
    L S L S = S R
    S L S L = R S
    S R S = L S L
    R S R = S L S
    L R = id, R L = id

Key facts why this normalization can work are,
1. Below, we only need to consider operations </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>h = apfst f | apsnd g›</span></span></span><span>, and we split </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>map_prod f g›</span></span></span><span>
   to </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>apfst f o apsnd g›</span></span></span><span> and consider them separately.
   Note any </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>h›</span></span></span><span> can swap over </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>S›</span></span></span><span>.
2. any operation </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>h›</span></span></span><span> that can swap over LHS in any of the equation above, can also swap over the RHS
   and result in an identical form.
3. S L S h L, if h can swap over the right L, h can also swap over the left </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>S L S›</span></span></span><span>
   Similarly for the other rewrites.
4. L S h L, if h can swap over the right L to </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>h'›</span></span></span><span>, </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>h'›</span></span></span><span> can also swap over </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>S R S›</span></span></span><span> from right,
   and results in the identical form with </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>h›</span></span></span><span> swapping over </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>L S›</span></span></span><span> from right
It means, swapping any </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>h›</span></span></span><span> in any order towards the left end, doesn't break the normalization-ability.
The order doesn't matter.

So, any </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>apfst, apsnd, map_prod›</span></span></span><span> can be swapped to the left most end, if it can.

Now, the sequence only remains </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>S, L, R›</span></span></span><span>, ... the proof is to be completed

idk, maybe we lost some assumption, like, requiring the first projection of the tuple is always
single-element or a pair but no more nested level.

I am not sure if the normaliza is complete but is terminating.
›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>named_theorems</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod_opr_norm|attribute"><span class="entity_def" id="Phi_Preliminary.prod_opr_norm|fact"><span>prod_opr_norm</span></span></span><span> </span><span class="quoted"><span>‹normalizations of product operations›</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>map_prod</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixr</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></span><span>"</span></span><span> 56</span><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(*if C<span class="hidden">⇩</span><sub>R</sub><span class="hidden">⇩</span><sub>1</sub> then *)</span></span><span>
</span><span class="keyword1"><span class="command"><span>setup</span></span></span><span> </span><span class="quoted"><span>‹</span><span>Sign.mandatory_path</span><span> </span><span class="inner_quoted"><span>"prod"</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.map_beta|fact"><span class="entity_def" id="Phi_Preliminary.prod.map_beta|thm"><span>map_beta</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.map_pairewise_eq|fact"><span class="entity_def" id="Phi_Preliminary.prod.map_pairewise_eq|thm"><span>map_pairewise_eq</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g'</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.map_unspec|fact"><span class="entity_def" id="Phi_Preliminary.prod.map_unspec|thm"><span>map_unspec</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec_prod|fact"><span>unspec_prod</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.map_unspec_eq|fact"><span class="entity_def" id="Phi_Preliminary.prod.map_unspec_eq|thm"><span>map_unspec_eq</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec|const"><span>unspec</span></a><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.unspec_prod|fact"><span>unspec_prod</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.case_prod_map_prod|fact"><span class="entity_def" id="Phi_Preliminary.prod.case_prod_map_prod|thm"><span>case_prod_map_prod</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>a'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>b'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>a'</span></span><span> </span><span class="bound"><span>b'</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.case_prod_map_prod|fact"><span>BNF_Fixpoint_Base.case_prod_map_prod</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Preliminary.prod.rotL_def|fact"><span class="entity_def" id="Phi_Preliminary.prod.rotL_def|thm"><span class="entity_def" id="Phi_Preliminary.prod.rotL_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Preliminary.prod.rotL|const"><span>rotL</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'c</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rotL</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Preliminary.prod.rotR_def|fact"><span class="entity_def" id="Phi_Preliminary.prod.rotR_def|thm"><span class="entity_def" id="Phi_Preliminary.prod.rotR_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Preliminary.prod.rotR|const"><span>rotR</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'c</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rotR</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Preliminary.prod.rpair|const"><span>rpair</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rpair</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot(1)|thm"><span>rot</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL_def|fact"><span>prod.rotL_def</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR_def|fact"><span>prod.rotR_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_rot_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_rot_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_rot_comp(1)|thm"><span>rot_rot_comp</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> ›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_rot_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_rot_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_rot_comp&apos;(1)|thm"><span>rot_rot_comp'</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_rot_comp|fact"><span>prod.rot_rot_comp</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_rot|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_rot(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_rot(1)|thm"><span>rot_rot</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_rot_comp|fact"><span>prod.rot_rot_comp</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a><span class="main"><span>]</span></span><span>
 
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp(1)|thm"><span>rot_prj_comp</span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL_def|fact"><span>prod.rotL_def</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR_def|fact"><span>prod.rotR_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_prj|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj(1)|thm"><span>rot_prj</span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_prj_comp|fact"><span>prod.rot_prj_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp&apos;(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp&apos;(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_prj_comp&apos;(1)|thm"><span>rot_prj_comp'</span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_prj_comp|fact"><span>prod.rot_prj_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a></a></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.prj_Pair_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.prj_Pair_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.prj_Pair_comp(1)|thm"><span>prj_Pair_comp</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.comb.K|const"><span>comb.K</span></a><span> </span><span class="free"><span>x</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.prj_Pair_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.prj_Pair_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.prj_Pair_comp&apos;(1)|thm"><span>prj_Pair_comp'</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.prj_Pair_comp|fact"><span>prod.prj_Pair_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp(1)|thm"><span>ap_prj<span class="hidden">⇩</span><sub>0</sub>_rot_comp</span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot(1)|thm"><span>ap_prj<span class="hidden">⇩</span><sub>0</sub>_rot</span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp|fact"><span>prod.ap_prj<span class="hidden">⇩</span><sub>0</sub>_rot_comp</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a></a></a></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a></a></a></a></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a></a></a></a></a></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp&apos;(1)|thm"><span>ap_prj<span class="hidden">⇩</span><sub>0</sub>_rot_comp'</span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_prj\&lt;^sub&gt;0_rot_comp|fact"><span>prod.ap_prj<span class="hidden">⇩</span><sub>0</sub>_rot_comp</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a></a></a></a></a></a></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp(1)|thm"><span>ap_prj_rot_comp</span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot(1)|thm"><span>ap_prj_rot</span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_prj_rot_comp|fact"><span>prod.ap_prj_rot_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a></a></a></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a></a></a></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a></a></a></a></a></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_prj_rot_comp&apos;(1)|thm"><span>ap_prj_rot_comp'</span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_prj_rot_comp|fact"><span>prod.ap_prj_rot_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a></a></a></a></a></a></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(11)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(10)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(9)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp(1)|thm"><span>ap_rotate_comp</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f'<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f'<span class="hidden">⇩</span><sub>1</sub></span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f'</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>3</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>g<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>3</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>3</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>3</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR_def|fact"><span>prod.rotR_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(11)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(10)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(9)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate(1)|thm"><span>ap_rotate</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_rotate_comp|fact"><span>prod.ap_rotate_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a></a></a></a></a></a></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a></a></a></a></a></a></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a></a></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a></a></a></a></a></a></a></a></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(11)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(10)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(9)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_rotate_comp&apos;(1)|thm"><span>ap_rotate_comp'</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_rotate_comp|fact"><span>prod.ap_rotate_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a></a></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a></a></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a></a></a></a></a></a></a></a></a></a><span class="main"><span>]</span></span><span>




</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rotate_eq_simp|fact"><span class="entity_def" id="Phi_Preliminary.prod.rotate_eq_simp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rotate_eq_simp(1)|thm"><span>rotate_eq_simp</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>y</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL_def|fact"><span>prod.rotL_def</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR_def|fact"><span>prod.rotR_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rotate_eq_ap_simp|fact"><span class="entity_def" id="Phi_Preliminary.prod.rotate_eq_ap_simp|thm"><span>rotate_eq_ap_simp</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="free"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>z</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>z</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.swap_proj_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.swap_proj_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.swap_proj_comp(1)|thm"><span>swap_proj_comp</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.swap_proj_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.swap_proj_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.swap_proj_comp&apos;(1)|thm"><span>swap_proj_comp'</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.swap_ap_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.swap_ap_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.swap_ap_comp(1)|thm"><span>swap_ap_comp</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.swap_ap|fact"><span class="entity_def" id="Phi_Preliminary.prod.swap_ap(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.swap_ap(1)|thm"><span>swap_ap</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.swap_ap_comp|fact"><span>prod.swap_ap_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.swap_ap_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.swap_ap_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.swap_ap_comp&apos;(1)|thm"><span>swap_ap_comp'</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.swap_ap_comp|fact"><span>prod.swap_ap_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot_comp(1)|thm"><span>prj_rot_apS_rot_comp</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot|fact"><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot(1)|thm"><span>prj_rot_apS_rot</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.prj_rot_apS_rot_comp|fact"><span>prod.prj_rot_apS_rot_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.prj_rot_apS_rot_comp&apos;(1)|thm"><span>prj_rot_apS_rot_comp'</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.prj_rot_apS_rot_comp|fact"><span>prod.prj_rot_apS_rot_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_ap_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_ap_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_ap_comp(1)|thm"><span>ap_ap_comp</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_ap|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_ap(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_ap(1)|thm"><span>ap_ap</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_ap_comp|fact"><span>prod.ap_ap_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.ap_ap_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.ap_ap_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.ap_ap_comp&apos;(1)|thm"><span>ap_ap_comp'</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_ap_comp|fact"><span>prod.ap_ap_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.prj_ap_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.prj_ap_comp&apos;(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.prj_ap_comp&apos;(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.prj_ap_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.prj_ap_comp&apos;(1)|thm"><span>prj_ap_comp'</span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x<span class="hidden">⇩</span><sub>3</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x<span class="hidden">⇩</span><sub>3</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x<span class="hidden">⇩</span><sub>4</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x<span class="hidden">⇩</span><sub>4</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>



</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_apS_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_apS_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_apS_comp(1)|thm"><span>rot_apS_comp</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_apS|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_apS(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_apS(1)|thm"><span>rot_apS</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_apS_comp|fact"><span>prod.rot_apS_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_apS_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_apS_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_apS_comp&apos;(1)|thm"><span>rot_apS_comp'</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_apS_comp|fact"><span>prod.rot_apS_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a><span class="main"><span>]</span></span><span>




</span><span class="comment1"><span>(*reduction of 4 elements,
  strategy: eliminate ‹apsnd rot›*)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp(1)|thm"><span>rot_aprot_rot_comp</span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
</span><span class="comment1"><span>(*can be derived:
  ‹prod.rotL ∘ prod.rotL ∘ apsnd prod.rotR = apfst prod.rotL o prod.rotL›
  ‹prod.rotL o apsnd prod.rotL o prod.rotR = apfst prod.rotR o prod.rotL›
  ‹prod.rotL ∘ apsnd prod.rotR o prod.rotR = prod.rotR o apfst prod.rotL›
  ‹apsnd prod.rotL o prod.rotR o prod.rotR = prod.rotR o apfst prod.rotR›*)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot(1)|thm"><span>rot_aprot_rot</span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_aprot_rot_comp|fact"><span>prod.rot_aprot_rot_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp&apos;(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp&apos;(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp&apos;(1)|thm"><span>rot_aprot_rot_comp'</span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_aprot_rot_comp|fact"><span>prod.rot_aprot_rot_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a></a></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f(1)|thm"><span>rot_aprot_rot_comp<span class="hidden">⇩</span><sub>f</sub></span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>3</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>3</sub></span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>4</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>4</sub></span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>5</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>5</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>5</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>5</sub></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>6</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>6</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>6</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>6</sub></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>7</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>7</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>h<span class="hidden">⇩</span><sub>7</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>7</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>7</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>h<span class="hidden">⇩</span><sub>7</sub></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>8</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>8</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>h<span class="hidden">⇩</span><sub>8</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotR|const"><span>prod.rotR</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rotL|const"><span>prod.rotL</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>8</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g<span class="hidden">⇩</span><sub>8</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>h<span class="hidden">⇩</span><sub>8</sub></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.ap_ap_comp|fact"><span>prod.ap_ap_comp</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_aprot_rot|fact"><span>prod.rot_aprot_rot</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot\&lt;^sub&gt;f(1)|thm"><span>rot_aprot_rot<span class="hidden">⇩</span><sub>f</sub></span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f|fact"><span>prod.rot_aprot_rot_comp<span class="hidden">⇩</span><sub>f</sub></span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a></a></a></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a></a></a></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a></a></a></a></a></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;|fact"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;(8)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;(7)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;(6)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;(5)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;(4)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;(3)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f&apos;(1)|thm"><span>rot_aprot_rot_comp<span class="hidden">⇩</span><sub>f</sub>'</span></span></span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod.rot_aprot_rot_comp\&lt;^sub&gt;f|fact"><span>prod.rot_aprot_rot_comp<span class="hidden">⇩</span><sub>f</sub></span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a></a></a></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a></a></a></a></a></a></a><span class="main"><span>]</span></span><span>







</span><span class="keyword1"><span class="command"><span>setup</span></span></span><span> </span><span class="quoted"><span>‹</span><span>Sign.parent_path</span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.swap_map_prod|fact"><span class="entity_def" id="Phi_Preliminary.swap_map_prod|thm"><span>swap_map_prod</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.swap_map_prod_comp|fact"><span class="entity_def" id="Phi_Preliminary.swap_map_prod_comp|thm"><span>swap_map_prod_comp</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.swap_map_prod_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.swap_map_prod_comp&apos;|thm"><span>swap_map_prod_comp'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>f<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.map_prod_eq_apfst_apsnd|fact"><span class="entity_def" id="Phi_Preliminary.map_prod_eq_apfst_apsnd|thm"><span>map_prod_eq_apfst_apsnd</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>map_prod</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>g</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.map_prod_eq_apsnd_apfst|fact"><span class="entity_def" id="Phi_Preliminary.map_prod_eq_apsnd_apfst|thm"><span>map_prod_eq_apsnd_apfst</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>map_prod</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>f</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>




</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod.compositionality|fact"><span>map_prod.compositionality</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span>
        </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod.comp|fact"><span>map_prod.comp</span></a><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.map_prod_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.map_prod_comp&apos;|thm"><span>map_prod_comp'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp|fact"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp(4)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp(3)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp(2)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp(1)|thm"><span>map_prod_ap_simp_comp</span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apsnd|const"><span>apsnd</span></a><span> </span><span class="free"><span>h'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> ›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span> ›</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.apfst|const"><span>apfst</span></a><span> </span><span class="free"><span>l'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>l'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.map_prod|const"><span>⊗<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="free"><span>g</span></span><span> ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp|fact"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp(4)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp(3)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp(2)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp(1)|thm"><span>map_prod_ap_simp</span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.map_prod_ap_simp_comp|fact"><span>map_prod_ap_simp_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a></a></a></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_apply|fact"><span>comp_apply</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a></a></a></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp&apos;|fact"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp&apos;(4)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp&apos;(3)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp&apos;(2)|thm"><span class="entity_def" id="Phi_Preliminary.map_prod_ap_simp_comp&apos;(1)|thm"><span>map_prod_ap_simp_comp'</span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.no_atp|attribute"><span class="operator"><span>no_atp</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.prod_opr_norm|attribute"><span class="operator"><span>prod_opr_norm</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.map_prod_ap_simp_comp|fact"><span>map_prod_ap_simp_comp</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><a class="entity_ref" href="Phi_BI.Phi_Aug.html#Phi_Aug.fun_comp_intr_left|fact"><span>fun_comp_intr_left</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_id|fact"><span>o_id</span></a></a></a></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_assoc|fact"><span>comp_assoc</span></a></a></a></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.swap_comp_swap&apos;|fact"><span class="entity_def" id="Phi_Preliminary.swap_comp_swap&apos;|thm"><span>swap_comp_swap'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.swap|const"><span>prod.swap</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>



</span><span class="comment1"><span>(*
lemma apS_rot_apS_eq_rot_S_rot[no_atp, prod_opr_norm]:
  ‹apfst prod.swap (prod.rotL (apsnd prod.swap x)) = prod.rotL (prod.swap (prod.rotL x))›
  ‹apsnd prod.swap (prod.rotR (apfst prod.swap x)) = prod.rotR (prod.swap (prod.rotR x))›
  unfolding prod.rotL_def prod.rotR_def
  by simp_all

lemma apS_rot_apS_eq_rot_S_rot_comp[no_atp, prod_opr_norm]:
  ‹apfst prod.swap o prod.rotL o apsnd prod.swap = prod.rotL o prod.swap o prod.rotL›
  ‹apsnd prod.swap o prod.rotR o apfst prod.swap = prod.rotR o prod.swap o prod.rotR›
  unfolding fun_eq_iff
  by simp_all

lemma apS_rot_apS_eq_rot_S_rot_comp'[no_atp, prod_opr_norm]:
  ‹f o apfst prod.swap o prod.rotL o apsnd prod.swap = f o prod.rotL o prod.swap o prod.rotL›
  ‹g o apsnd prod.swap o prod.rotR o apfst prod.swap = g o prod.rotR o prod.swap o prod.rotR›
  unfolding fun_eq_iff
  by simp_all

term ‹apsnd prod.swap (prod.rotR (prod.swap x)) = prod.rotR (apfst prod.swap (prod.rotL x))›

lemma rot_apS_rot_eq_apS_rot_S[no_atp, prod_opr_norm]:
  ‹prod.rotL (apsnd prod.swap (prod.rotR x)) = apfst prod.swap (prod.rotL (prod.swap x))›
  ‹apsnd prod.swap (prod.rotR (prod.swap x)) = prod.rotR (apfst prod.swap (prod.rotL x))›
  unfolding prod.rotL_def prod.rotR_def
  by simp_all

lemma rot_apS_rot_eq_apS_rot_S_comp[no_atp, prod_opr_norm]:
  ‹prod.rotL ∘ apsnd prod.swap ∘ prod.rotR = apfst prod.swap o prod.rotL o prod.swap›
  ‹apsnd prod.swap o prod.rotR o prod.swap = prod.rotR ∘ apfst prod.swap ∘ prod.rotL› (*apsnd xx is a term has to be normalized, I guess*)
  unfolding fun_eq_iff
  by simp_all

lemma rot_apS_rot_eq_apS_rot_S_comp'[no_atp, prod_opr_norm]:
  ‹f o prod.rotL ∘ apsnd prod.swap ∘ prod.rotR = f o apfst prod.swap o prod.rotL o prod.swap›
  ‹g o apsnd prod.swap o prod.rotR o prod.swap = g o prod.rotR ∘ apfst prod.swap ∘ prod.rotL› (*apsnd xx is a term has to be normalized, I guess*)
  unfolding fun_eq_iff
  by simp_all
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Helper Conversion›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Preliminary.PURE_TOP_def|fact"><span class="entity_def" id="Phi_Preliminary.PURE_TOP_def|thm"><span class="entity_def" id="Phi_Preliminary.PURE_TOP_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="entity_def" id="Phi_Preliminary.PURE_TOP|const"><span>PURE_TOP</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>P</span></span><span class="main"><span>::</span></span><span>prop</span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="bound"><span>P</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.PURE_TOP_I|fact"><span class="entity_def" id="Phi_Preliminary.PURE_TOP_I|thm"><span>PURE_TOP_I</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1000</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.PURE_TOP|const"><span>PURE_TOP</span></a><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.PURE_TOP_def|fact"><span>PURE_TOP_def</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.PURE_TOP_imp|fact"><span class="entity_def" id="Phi_Preliminary.PURE_TOP_imp|thm"><span>PURE_TOP_imp</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.PURE_TOP|const"><span>PURE_TOP</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span>›</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?LHS</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?RHS</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_27983..27989">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?LHS</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#offset_27983..27989"><span>this</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.PURE_TOP_I|fact"><span>PURE_TOP_I</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?RHS</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?RHS</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?LHS</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/syntax/helper_conv.ML.html"><span>‹library/syntax/helper_conv.ML›</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Helper Simplification›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>simproc_setup</span></span></span><span> </span><span>Funcomp_Lambda</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>f</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><span class="free"><span>g</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctm</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>case</span></span></span><span> </span><span>Thm.term_of</span><span> </span><span class="entity"><span>ctm</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span> </span><span>Const</span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>Fun.comp</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span>Abs</span><span> </span><span class="main"><span>_</span></span><span> </span><span>$</span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
        </span><span>SOME</span><span> </span><span class="main"><span>(</span></span><span>Conv.rewr_conv</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm'</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.atomize_eq|fact"><span>atomize_eq</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>ctm</span></span><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>|</span></span><span> </span><span>Const</span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>Fun.comp</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span class="main"><span>_</span></span><span> </span><span>$</span><span> </span><span>Abs</span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
        </span><span>SOME</span><span> </span><span class="main"><span>(</span></span><span>Conv.rewr_conv</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm'</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.atomize_eq|fact"><span>atomize_eq</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>ctm</span></span><span class="main"><span>)</span></span><span>
     </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>NONE</span><span>
›</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Helper Isar Commands›</span></span></span><span>

</span><span class="comment1"><span>(* declare [[ML_debugger=false, ML_exception_debugger=false]] *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/syntax_group.ML.html"><span>‹library/tools/syntax_group.ML›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/adhoc_overloading.ML.html"><span>‹library/tools/adhoc_overloading.ML›</span></a></span><span>

</span><span class="comment1"><span>(* declare [[ML_debugger, ML_exception_debugger]] *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Syntax›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>optional_translation_group</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.do_notation|attribute"><span>do_notation</span></span><span>
  </span><span class="quoted"><span>‹enables the do-notation for program monads›</span></span><span>
  </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>flag</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
      </span><span class="main"><span>(</span></span><span>print_mode</span><span> </span><span>:=</span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>flag</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span>insert</span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span>remove</span><span class="main"><span>)</span></span><span>
                        </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="inner_quoted"><span>"do_notation"</span></span><span> </span><span class="main"><span>(</span></span><span>!</span><span>print_mode</span><span class="main"><span>)</span></span><span> </span><span class="main"><span>;</span></span><span>
       </span><span class="entity"><span>ctxt</span></span><span class="main"><span>)</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.do_notation|attribute"><span class="operator"><span>do_notation</span></span></a><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The Friendly Character›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/tools/the_friendly_character.ML.html"><span>‹library/tools/the_friendly_character.ML›</span></a></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Phi_Preliminary.Friendly_Help_def|fact"><span class="entity_def" id="Phi_Preliminary.Friendly_Help_def|thm"><span class="entity_def" id="Phi_Preliminary.Friendly_Help_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Phi_Preliminary.Friendly_Help|const"><span>Friendly_Help</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR_error_msg.html#PLPR_error_msg.text|type"><span>text</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/tools/simpset.ML.html#PLPR.\&lt;phi&gt;safe_simp|attribute"><span class="operator"><span>φsafe_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Friendly_Help</span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.Friendly_Help_I|fact"><span class="entity_def" id="Phi_Preliminary.Friendly_Help_I|thm"><span>Friendly_Help_I</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Friendly_Help|const"><span>Friendly_Help</span></a><span> </span><span class="free"><span>ANY</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Friendly_Help_def|fact"><span>Friendly_Help_def</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Phi_Preliminary.Friendly_Help_E|fact"><span class="entity_def" id="Phi_Preliminary.Friendly_Help_E|thm"><span>Friendly_Help_E</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.elim|attribute"><span class="operator"><span>elim</span></span></a><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Friendly_Help|const"><span>Friendly_Help</span></a><span> </span><span class="free"><span>ANY</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>C</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="comment1"><span>(*TODO: move this to φlang_parser so that the help is displayed only when the IDECP ends at that*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_ML</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Friendly_Help|const"><span>Friendly_Help</span></a></span><span> 1000 </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Friendly_Help|const"><span>Friendly_Help</span></a><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ctxt</span></span><span class="main"><span>,</span></span><span class="entity"><span>sequent</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
 </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>Config.get</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>Phi_The_Friendly_Character.enable</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
        </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span>$</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>text</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Thm.major_prem_of</span><span> </span><span class="entity"><span>sequent</span></span><span>
        </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>pretty</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Text_Encoding.decode_text_pretty</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>text</span></span><span>
       </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>Phi_The_Friendly_Character.info</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>pretty</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  </span><span>Seq.single</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ctxt</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="Phi_BI.Phi_Preliminary.html#Phi_Preliminary.Friendly_Help_I|fact"><span>Friendly_Help_I</span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span>RS</span><span> </span><span class="entity"><span>sequent</span></span><span class="main"><span>)</span></span><span>
 </span><span class="main"><span>)</span></span><span>
›</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹General Reasoning Rules›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1000</span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹pred_option›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1000</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span>
</span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.pred_option|const"><span>pred_option</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span> 1000</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹ </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.pred_option|const"><span>pred_option</span></a><span> </span><span class="free"><span>P</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Some very Early Reasoning›</span></span></span><span>



</span><span class="comment1"><span>(*

declare (* disjE[φinhabitance_rule] *) (*I don't like divergence!*)
        conjE[φinhabitance_rule]
        set_mult_inhabited[φinhabitance_rule]
        set_plus_inhabited[φinhabitance_rule]

lemma [φinhabitance_rule, elim!]:
  ‹Satisfiable 1 ⟹ C ⟹ C› .*)</span></span><span>

</span><span class="comment1"><span>(*TODO:
lemma Membership_E_Inhabitance:
  ‹x ∈ S ⟹ (Satisfiable S ⟹ C) ⟹ C›
  unfolding Satisfiable_def by blast*)</span></span><span>





</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Very Early Mechanism›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_group</span></span></span><span> </span><span>local</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>10000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>10000</span><span class="main"><span>,</span></span><span>10000</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>‹local reasoning rules given from the hypothese of a programming context›</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Default Attributes in Programming›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Registry of default attributes of antecedents in the deductive programming.›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="USER_HOME/Current/phi-system/Phi_BI/library/system/premise_attribute.ML.html"><span>‹library/system/premise_attribute.ML›</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>φreasoner_group</span></span></span><span> </span><span>φattr_all</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>100</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span>9999</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span>‹collecting all φattribute groups›</span></span><span>
                </span><span>φattr_normalize</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>3000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>3000</span><span class="main"><span>,</span></span><span> 3300</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>φattr_all</span><span> </span><span class="quoted"><span>‹›</span></span><span>
                </span><span>φattr_EIF</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>2500</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>2500</span><span class="main"><span>,</span></span><span> 2500</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>φattr_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>φattr_normalize</span><span>
                      </span><span class="quoted"><span>‹extract facts implied inside›</span></span><span>
                </span><span>φattr_late_normalize</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>2000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>2000</span><span class="main"><span>,</span></span><span>2300</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>φattr_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>φattr_EIF</span><span> </span><span class="quoted"><span>‹›</span></span><span>
                </span><span>φattr</span><span>     </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>1000</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span>1000</span><span class="main"><span>,</span></span><span> 1030</span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>φattr_all</span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>φattr_late_normalize</span><span>
                      </span><span class="quoted"><span>‹default group for specific forms of premises›</span></span><span>

</span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Configuring Existing Antecedents›</span></span></span><span>

</span><span class="comment1"><span>(*attribute_setup forall_elim_vars =
  ‹Scan.succeed (Thm.rule_attribute [] (fn _ =&gt; fn th =&gt;
      Thm.forall_elim_vars (Thm.maxidx_of th + 1) th))›
  "quantified schematic vars"*)</span></span><span>
</span><span class="comment1"><span>(*
named_theorems φattr_elim_tag_rules
  ‹Introduction rules that will be applied to eliminate tags for every premises›
attribute_setup φattr_elim_tags = ‹
  Scan.succeed (Thm.rule_attribute [] (fn ctxt =&gt; fn th =&gt;
    let val rules = Named_Theorems.get (Context.proof_of ctxt) <span class="hidden">\&lt;^</span><span class="control">named_theorems</span><span class="hidden">&gt;</span>‹φattr_elim_tag_rules›
        fun apply th =
          case get_first (fn rule =&gt; SOME (rule RS th) handle THM _ =&gt; NONE) rules
            of SOME ret =&gt; apply ret
             | NONE =&gt; th
        fun elim_vars th = Thm.forall_elim_vars (Thm.maxidx_of th + 1) th
     in th
     |&gt; elim_vars
     |&gt; apply
     |&gt; elim_vars
    end))
›

φreasoner_group forall_elim_vars = (3550, [3550, 3550]) in φattr_normalize ‹› *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span>
  </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_BI/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.\&lt;phi&gt;declare|attribute"><span class="operator"><span>φdeclare</span></span></a><span class="main"><span class="main"><span>]</span></span></span><span>        </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>        </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr_EIF</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>
  </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_BI/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute|attribute"><span class="operator"><span>φpremise_attribute</span></span></a><span> </span><span class="quasi_keyword"><span>once</span></span><span class="main"><span class="main"><span>?</span></span></span><span> </span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_Logic_Programming_Reasoner/library/reasoner.ML.html#PLPR.\&lt;phi&gt;reason|attribute"><span class="operator"><span>φreason</span></span></a><span class="main"><span>?</span></span><span> </span><span class="main"><span>%</span></span><span>local</span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Is_Literal|const"><span>Is_Literal</span></a><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span>  </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span>

  </span><a class="entity_ref" href="USER_HOME/Current/phi-system/Phi_BI/library/system/premise_attribute.ML.html#Phi_Preliminary.\&lt;phi&gt;premise_attribute_ML|attribute"><span class="operator"><span>φpremise_attribute_ML</span></span></a><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>Thm.declaration_attribute</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>thm</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span> </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>term_A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>case</span></span></span><span> </span><span>Thm.prop_of</span><span> </span><span class="entity"><span>thm</span></span><span>
                       </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span>$</span><span> </span><span class="main"><span>(</span></span><span>Const</span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>HOL.eq</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>A</span></span><span> </span><span>$</span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>A</span></span><span>
                        </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span>$</span><span> </span><span class="main"><span>(</span></span><span>Const</span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Simplify|const"><span>Simplify</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span class="main"><span>_</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>A</span></span><span> </span><span>$</span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>A</span></span><span>
        </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>cterm_A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Context.cases</span><span> </span><span>Thm.global_cterm_of</span><span> </span><span>Thm.cterm_of</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>term_A</span></span><span>
        </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>rule</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">instantiate</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="free"><span class="entity"><span>cterm_A</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>=</span></span><span class="quoted"><span>‹</span><span>Thm.ctyp_of_cterm</span><span> </span><span class="entity"><span>cterm_A</span></span><span>›</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
                                  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Is_Literal|const"><span>Is_Literal</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>cterm_A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Is_Literal_def|fact"><span>Is_Literal_def</span></a><span class="main"><span>)</span></span><span>›</span></span></span><span>
     </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>Phi_Reasoner.add_rule</span></span><span> </span><span>Position.none</span><span> </span><span class="entity"><span>Phi_Reasoner.NORMAL_LOCAL_CUT'</span></span><span> </span><span class="main"><span>(</span></span><span>SOME</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>reasoner_group</span></span><span> </span><span class="main"><span>%</span></span><span>is_literal</span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>)</span></span><span>
            </span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span>Thm.concl_of</span><span> </span><span class="entity"><span>rule</span></span><span class="main"><span>,</span></span><span> </span><span>NONE</span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span>NONE</span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>rule</span></span><span class="main"><span>]</span></span><span> </span><span class="entity"><span>ctxt</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
    </span><span class="keyword3"><span class="keyword"><span>handle</span></span></span><span> </span><span class="entity"><span>MATCH</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>ctxt</span></span><span>
  </span><span class="main"><span>)</span></span><span>›</span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.Simplify|const"><span>Simplify</span></a><span> </span><a class="entity_ref" href="Phi_Logic_Programming_Reasoner.PLPR.html#PLPR.mode_literal|const"><span>mode_literal</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>›</span></span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="main"><span class="main"><span>%</span></span></span><span>φattr</span><span class="main"><span class="main"><span>)</span></span></span><span>
</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Convention of Syntax Priority›</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
</span><span class="antiquoted"><span>▪</span></span><span> 10: Labelled, Programming_CurrentConstruction, View_Shift_CurrentConstruction
      PendingConstruction, ToA_Construction, Argument tag
</span><span class="antiquoted"><span>▪</span></span><span> 12: View_Shift, Transformation
</span><span class="antiquoted"><span>▪</span></span><span> 13: Remains
</span><span class="antiquoted"><span>▪</span></span><span> 14: ExBI
</span><span class="antiquoted"><span>▪</span></span><span> 15: Comma, Subjection
</span><span class="antiquoted"><span>▪</span></span><span> 16: Struct Tag, SYNTHESIS
</span><span class="antiquoted"><span>▪</span></span><span> 18: Assertion_Matches
</span><span class="antiquoted"><span>▪</span></span><span> 20: φ-type colon
›</span></span></span><span>


</span><span class="comment1"><span>(*TODO: Move this*)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>